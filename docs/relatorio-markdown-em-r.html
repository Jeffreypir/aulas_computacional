<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Relatório Markdown em R | ESTATÍSTICA COMPUTACIONAL</title>
  <meta name="description" content="Disciplina de Estatística Computacional - Departamento de Estatística" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Relatório Markdown em R | ESTATÍSTICA COMPUTACIONAL" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://prdm0.github.io/aulas_computacional/" />
  
  <meta property="og:description" content="Disciplina de Estatística Computacional - Departamento de Estatística" />
  <meta name="github-repo" content="prdm0/aulas_computacional" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Relatório Markdown em R | ESTATÍSTICA COMPUTACIONAL" />
  
  <meta name="twitter:description" content="Disciplina de Estatística Computacional - Departamento de Estatística" />
  

<meta name="author" content="Docente: Prof. Dr. Pedro Rafael Diniz Marinho   E-mail: pedro.rafael.marinho@gmail.com / pedro@de.ufpb.br" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="versionamento-de-codigo.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.1/DiagrammeR.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Início</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html"><i class="fa fa-check"></i>Prefácio</a><ul>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#tecnologias-abordadas-no-curso"><i class="fa fa-check"></i>Tecnologias abordadas no curso</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#teorias-abordadas-no-curso"><i class="fa fa-check"></i>Teorias abordadas no curso</a></li>
<li class="chapter" data-level="" data-path="prefacio.html"><a href="prefacio.html#sugestoes-de-passos-para-revisao-da-linguagem-r"><i class="fa fa-check"></i>Sugestões de passos para revisão da linguagem R</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="revisao-basica-da-linguagem-r.html"><a href="revisao-basica-da-linguagem-r.html"><i class="fa fa-check"></i><b>1</b> Revisão básica da linguagem R</a><ul>
<li class="chapter" data-level="" data-path="revisao-basica-da-linguagem-r.html"><a href="revisao-basica-da-linguagem-r.html#exercicios-propostos"><i class="fa fa-check"></i>Exercícios propostos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="o-evangelho-do-gnulinux.html"><a href="o-evangelho-do-gnulinux.html"><i class="fa fa-check"></i><b>2</b> O Evangelho do GNU/Linux</a><ul>
<li class="chapter" data-level="2.1" data-path="o-evangelho-do-gnulinux.html"><a href="o-evangelho-do-gnulinux.html#um-breve-historico"><i class="fa fa-check"></i><b>2.1</b> Um breve histórico</a></li>
<li class="chapter" data-level="2.2" data-path="o-evangelho-do-gnulinux.html"><a href="o-evangelho-do-gnulinux.html#vantagens-em-utilizar-gnulinux"><i class="fa fa-check"></i><b>2.2</b> Vantagens em utilizar GNU/Linux</a></li>
<li class="chapter" data-level="2.3" data-path="o-evangelho-do-gnulinux.html"><a href="o-evangelho-do-gnulinux.html#algumas-distribuicoes"><i class="fa fa-check"></i><b>2.3</b> Algumas distribuições</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="versionamento-de-codigo.html"><a href="versionamento-de-codigo.html"><i class="fa fa-check"></i><b>3</b> Versionamento de código</a><ul>
<li class="chapter" data-level="3.1" data-path="versionamento-de-codigo.html"><a href="versionamento-de-codigo.html#git"><i class="fa fa-check"></i><b>3.1</b> Git</a></li>
<li class="chapter" data-level="3.2" data-path="versionamento-de-codigo.html"><a href="versionamento-de-codigo.html#github"><i class="fa fa-check"></i><b>3.2</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html"><i class="fa fa-check"></i><b>4</b> Relatório Markdown em R</a><ul>
<li class="chapter" data-level="4.1" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#markdown"><i class="fa fa-check"></i><b>4.1</b> Markdown</a><ul>
<li class="chapter" data-level="4.1.1" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#sintaxe"><i class="fa fa-check"></i><b>4.1.1</b> Sintaxe</a></li>
<li class="chapter" data-level="" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#exercicios"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#funcoes"><i class="fa fa-check"></i><b>4.2</b> Funções</a><ul>
<li class="chapter" data-level="4.2.1" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#passando-atributos"><i class="fa fa-check"></i><b>4.2.1</b> Passando atributos</a></li>
<li class="chapter" data-level="4.2.2" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#funcoes-anonimas"><i class="fa fa-check"></i><b>4.2.2</b> Funções anônimas</a></li>
<li class="chapter" data-level="4.2.3" data-path="relatorio-markdown-em-r.html"><a href="relatorio-markdown-em-r.html#escopo-lexico"><i class="fa fa-check"></i><b>4.2.3</b> Escopo léxico</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ESTATÍSTICA COMPUTACIONAL</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="relatorio-markdown-em-r" class="section level1">
<h1><span class="header-section-number">4</span> Relatório Markdown em R</h1>
<p>Uma das tarefas mais importantes e frequentes na vida de um estatístico refere-se à construção de documentos (relatórios, manuais, etc). A construção desses documentos é algo que demanda tempo, uma vez que, por exemplo, temos que escrever a respeito das metodologias estatísticas consideradas e justificar o seu uso, organizar as informações obtidas de um modelo estatístico e interpretá-las, tabular os resultados de algumas simulação, escolher o formato de saída do documento e escrever de forma clara e robusta os resultados obtidos (muitos que irão ler seu documento não são estatísticos). Um pouco dessa rotina encontra-se no diagrama a baixo:</p>
<div class="figure" style="text-align: center"><span id="fig:diagramafluxo"></span>
<div id="htmlwidget-dc0fec937bee512f2007" style="width:700px;height:600px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-dc0fec937bee512f2007">{"x":{"diagram":"\ngraph TD\n\nA((fa:fa-database DADOS))-->B((R))\nB-->C(ORGANIZAÇÃO DOS DADOS)\nD(ESCOLHA DAS METODOLOGIAS)\nC-->|Implementar|E((R))\nD-->|Implementar|E\nE-->F(ORGANIZAÇÃO DOS RESULTADOS)\nF-->|Frequente|G((Documento))\n\nstyle A fill:#ffe5cc\nstyle B fill:#ffe5cc\nstyle C fill:#ffe5cc\nstyle D fill:#ffe5cc\nstyle E fill:#ffe5cc\nstyle F fill:#ffe5cc\nstyle G fill:#ffe5cc\n"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figura 4.1: Fluxo de trabalho - organização dos dados, escolhas das metodologias, implementações e edição de documento.
</p>
</div>
<p>Como descrito no diagrama <a href="relatorio-markdown-em-r.html#fig:diagramafluxo">4.1</a>, o processo de construção de um relatório é um processo frequente, uma vez que você muito provavelmente, em alguma empresa, irá deparar-se com documentos em que deverão ser atualizados, dia após dia. Por exemplo, você poderá vir a trabalhar em uma empresa em que diariamente terá que enviar relatório(s) ao seu chefe ou para um grupo de pessoas. Por exemplo, em muitas situações, esse(s) documentos(s) poderão possuir um layout predefinido, onde serão apenas alterados os resultados/retornos obtidos por suas funções implementadas em <a href="https://www.r-project.org"><strong>R</strong></a>. Ou seja, estamos considerando o caso em que você diariamente tem o mesmo relatório com diferentes estatísticas (indicadores descritivos, resultados inferenciais, etc). Com o <a href="https://www.r-project.org"><strong>R</strong></a> e o <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a>, bem como utlizando outras ferramentas disponíveis para programadores de <a href="https://www.r-project.org"><strong>R</strong></a>, você poderá automatizar, ao máximo, o processo de construção documentos.</p>
<p>Por tratar-se de uma comunidade grande e que envolve muitos estatísticos, a comunidade de <a href="https://www.r-project.org"><strong>R</strong></a> vem constantemente desenvolvendo ferramentas de interesse para quem trabalha com estatística e aprendizado estatístico. Muitas dessas ferramentas são disponibilizadas na forma de pacotes, no <a href="https://cran.r-project.org/web/packages/index.html"><strong>CRAN</strong></a> (<strong>The Comprehensive R Archive Network</strong>), bem como no <a href="https://github.com/"><strong>GitHub</strong></a>. Isso mostra a grande flexivilidade de <a href="https://www.r-project.org"><strong>R</strong></a> e o quanto essa linguagem se adapta às necessidades de um estatístico ou à quem for de interesse a análise de dados. Você poderá programar em qualquer linguagem, porém, programar em <a href="https://www.r-project.org"><strong>R</strong></a> tornará sua vida de progamador/estatístico mais fácil, caso o seu seu interesse esteja em resolver problemas estatísticos e/ou que envolvam aprendizado estatístico, denominado por muitos de <a href="https://pt.wikipedia.org/wiki/Aprendizado_de_m%C3%A1quina"><strong>machine learning</strong> (<strong>aprendizado de máquina</strong>)</a>.</p>
<p><strong>Observação</strong>:</p>

<div class="rmdobservation">
<div class="text-justify">
<p>Nada impedirá que você venha trabalhar com problemas não estatísticos em <a href="https://www.r-project.org"><strong>R</strong></a>. <a href="https://www.r-project.org"><strong>R</strong></a> é uma linguagem elegante, flexível e que permite se comunicar com diversas outras linguagens de programação.</p>
</div>
</div>

<p>Como mostra o diagrama <a href="relatorio-markdown-em-r.html#fig:diagramafluxo">4.1</a>, a linguagem <a href="https://www.r-project.org"><strong>R</strong></a> está no meio de importantes etapas de um estudo. O estatístico poderá utilizar o <a href="https://www.r-project.org"><strong>R</strong></a> para organizar os dados, implementar as metodologias estatísticas adotadas no estudo e se quiser, poderá utilizar o <a href="https://www.r-project.org"><strong>R</strong></a> para construir o relatório.</p>
<p>Note que no diagrama <a href="relatorio-markdown-em-r.html#fig:diagramafluxo">4.1</a>, descrevemos a linguagem <a href="https://www.r-project.org"><strong>R</strong></a> como uma ferramenta que está presente entre quase todos os passos na construção dos resultados de um estudo. Integrando o <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> com a linguagem <a href="https://www.r-project.org"><strong>R</strong></a>, você fará com que o <a href="https://www.r-project.org"><strong>R</strong></a> esteja presente entre todos os processos do estudo, o que certamente trará grande flexibilidade (possibilidades) às suas análises. Assim, seu fluxo de trabalho passará de <a href="relatorio-markdown-em-r.html#fig:diagramafluxo">4.1</a> para <a href="relatorio-markdown-em-r.html#fig:diagramafluxor">4.2</a> otimizando assim, as suas análises.</p>
<div class="figure" style="text-align: center"><span id="fig:diagramafluxor"></span>
<div id="htmlwidget-5af829c347e5206b843f" style="width:780px;height:670px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-5af829c347e5206b843f">{"x":{"diagram":"\ngraph TD\n\nA((fa:fa-database DADOS))-->B((R))\nB-->C(ORGANIZAÇÃO DOS DADOS)\nD(ESCOLHA DAS METODOLOGIAS)\nC-->|Implementar|E((R))\nD-->|Implementar|E\nE-->F(ORGANIZAÇÃO DOS RESULTADOS)\nF-->G((R))\nG-->|R com Markdown|H((Documento))\n\nstyle A fill:#ffe5cc\nstyle B fill:#ffe5cc\nstyle C fill:#ffe5cc\nstyle D fill:#ffe5cc\nstyle E fill:#ffe5cc\nstyle F fill:#ffe5cc\nstyle G fill:#ff8900\nstyle H fill:#ffe5cc\n"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figura 4.2: Linguagem <a href="https://www.r-project.org"><strong>R</strong></a> entre todos os fluxos de trabalho de um estudo estatístico. Destaque para o uso de <a href="https://www.r-project.org"><strong>R</strong></a> para a construção de um relatório.
</p>
</div>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Esse material que você está lendo agora mostra um pouco do que você consegue fazer com o <a href="https://www.r-project.org"><strong>R</strong></a> + <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> utilizando algumas ferramentas (pacotes) disponíveis para o <a href="https://www.r-project.org"><strong>R</strong></a>. As ferramentas que integram <a href="https://www.r-project.org"><strong>R</strong></a> com <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> são bem integradas com a IDE de programação <a href="https://www.rstudio.com/"><strong>RStudio</strong></a>, o que facilita um pouco o trabalho de edição.</p>
</div>
</div>

<div id="markdown" class="section level2">
<h2><span class="header-section-number">4.1</span> Markdown</h2>
<p><a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> é uma linguagem de marcação desenvolvida em 2004 por <a href="https://en.wikipedia.org/wiki/John_Gruber"><strong>John Gruber</strong></a> com a colaboração de <a href="https://en.wikipedia.org/wiki/Aaron_Swartz"><strong>Aaron Swartz</strong></a>. <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> é uma linguagem muito leve e diponível sob os termos de uma licença de código aberto no estilo BSD.</p>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Algo curioso com relação a linguagem <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> é que o seu lançamento inicial se deu em 19 de março de 2004 e o seu último lançamento (versão 1.0.1) foi em 17 de dezembro do mesmo ano. A versão 1.0.1 do <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> possui apenas <strong>18 KB</strong>.</p>
</div>
</div>

<p></br></p>
<div class="figure" style="text-align: center"><span id="fig:logomarkdown"></span>
<img src="images/logo_markdown.png" alt="Logo da linguagem de marcação [**Markdown**](https://daringfireball.net/projects/markdown/) utilizada para conversão de texto em [**HTML**](https://pt.wikipedia.org/wiki/HTML)." width="40%" />
<p class="caption">
Figura 4.3: Logo da linguagem de marcação <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> utilizada para conversão de texto em <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>.
</p>
</div>
<p></br></p>
<p><strong>Importante</strong>:</p>

<div class="rmdimportant">
<div class="text-justify">
<p>Arquivos em <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> devem possuir a extensão <strong>.md</strong>.</p>
</div>
</div>

<p></br></p>
<p>A linguagem <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> faz com que a tarefa de construir páginas em <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a> seja algo bem mais fácil e prazeroso. Sinceramente, você não estaria lendo esse material se eu tivesse que escrever todo esse conteúdo diretamente em <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>. Para entender um pouco do que estou falando, logo abaixo você encontrará dois exemplos do mesmo texto escrito utilizando as linguagens de marcação <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> e <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>, respectivamente. Ambos nos levarão ao mesmo resultado de uma página em <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>. Note como é mais claro e limpo o código em <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> em comparação ao código em <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>.</p>
<p></br></p>
<p><strong>Texto escrito utilizando Markdown</strong>:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="fu"># Seção</span>

Escrevendo alguma coisa nessa minha seção.

<span class="fu">## Subseção</span>

Escrevendo alguma coisa nessa minha subseção.

Outra linha.

Colocando texto em itálico _texto em itálico_ ou *texto em itálico*, em negrito 
**texto em negrito** e destacando um código <span class="bn">`f &lt;- function() ...`</span>.

Criando uma linha horizontal:

---

Listando itens:

  * R é Open Source
  * R é uma ótima linguagem de progrmação
  * Estatísticos em todo o mundo usam R
  * R é utilizado por grandes empresas para análise de dados e em aprendizagem de máquina.

---

Enumerando itens:

  1. R Agro
  2. R é Tec
  3. R é Pop
  4. R é Tudo

---

Um bom curso de estatística computacional utilizando R poderá ser encontrado em <span class="ot">[**Estatística Computacional**](https://prdm0.github.io/aulas_computacional)</span>.

<span class="al">![Logo da linguagem de programação R.](https://www.r-project.org/logo/Rlogo.png &quot;icon&quot;)</span>

Lembre-se:

&gt;<span class="dt"> Batatinha quando nasce, esparrama pelo chão. </span>
<span class="dt">&gt; Se você não aprender em R irá sofrer de montão.</span>

&gt;<span class="dt"> --- Autor desconhecido, 2019.</span>

&lt;strong&gt;Se eu desejar, poderei utilizar código HTML&lt;/strong&gt;.</code></pre>
<p><strong>Texto escrito utilizando HTML</strong>:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Seção<span class="kw">&lt;/h1&gt;</span>

<span class="kw">&lt;p&gt;</span>Escrevendo alguma coisa nessa minha seção.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;h2&gt;</span>Subseção<span class="kw">&lt;/h2&gt;</span>

<span class="kw">&lt;p&gt;</span>Escrevendo alguma coisa nessa minha subseção.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;</span>Outra linha.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;</span>Colocando texto em itálico <span class="kw">&lt;em&gt;</span>texto em itálico<span class="kw">&lt;/em&gt;</span> ou <span class="kw">&lt;em&gt;</span>texto em itálico<span class="kw">&lt;/em&gt;</span>, em negrito 
<span class="kw">&lt;strong&gt;</span>texto em negrito<span class="kw">&lt;/strong&gt;</span> e destacando um código <span class="kw">&lt;code&gt;</span>f <span class="dv">&amp;lt;</span>- function() ...<span class="kw">&lt;/code&gt;</span>.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;</span>Criando uma linha horizontal:<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;hr</span> <span class="kw">/&gt;</span>

<span class="kw">&lt;p&gt;</span>Listando itens:<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;ul&gt;</span>
<span class="kw">&lt;li&gt;</span>R é Open Source<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>R é uma ótima linguagem de progrmação<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>Estatísticos em todo o mundo usam R<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>R é utilizado por grandes empresas para análise de dados e em aprendizagem de máquina.<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;/ul&gt;</span>

<span class="kw">&lt;hr</span> <span class="kw">/&gt;</span>

<span class="kw">&lt;p&gt;</span>Enumerando itens:<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;ol&gt;</span>
<span class="kw">&lt;li&gt;</span>R Agro<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>R é Tec<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>R é Pop<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;li&gt;</span>R é Tudo<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;/ol&gt;</span>

<span class="kw">&lt;hr</span> <span class="kw">/&gt;</span>

<span class="kw">&lt;p&gt;</span>Um bom curso de estatística computacional utilizando R poderá ser encontrado em <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;https://prdm0.github.io/aulas_computacional&quot;</span><span class="kw">&gt;&lt;strong&gt;</span>Estatística Computacional<span class="kw">&lt;/strong&gt;&lt;/a&gt;</span>.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;&lt;img</span><span class="ot"> src=</span><span class="st">&quot;https://www.r-project.org/logo/Rlogo.png&quot;</span><span class="ot"> alt=</span><span class="st">&quot;Logo da linguagem de programação R.&quot;</span><span class="ot"> title=</span><span class="st">&quot;icon&quot;</span> <span class="kw">/&gt;&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;</span>Lembre-se:<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;blockquote&gt;</span>
  <span class="kw">&lt;p&gt;</span>Batatinha quando nasce, esparrama pelo chão. 
Se você não aprender em R irá sofrer de montão.<span class="kw">&lt;/p&gt;</span>

<span class="kw">&lt;p&gt;</span>--- Autor desconhecido, 2019.<span class="kw">&lt;/p&gt;</span>
<span class="kw">&lt;/blockquote&gt;</span>

<span class="kw">&lt;p&gt;&lt;strong&gt;</span>Se eu desejar, poderei utilizar código HTML<span class="kw">&lt;/strong&gt;</span>.<span class="kw">&lt;/p&gt;</span></code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Os códigos apresentados acima, utilizando as linguagens de marcação <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> e <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a>, irão nos levar aos mesmos resultados. Para observar o resultado, clique <a href="files/example_html.html"><strong>aqui</strong></a>.</p>
<p>É claro que o <a href="https://pt.wikipedia.org/wiki/HTML"><strong>HTML</strong></a> produzido ainda é bem simples e “rústico”, lembrando um pouco das páginas do início da popularização da internet. Mas calma, utilizando as ferramentas corretas e que estão disponíveis em <a href="https://www.r-project.org"><strong>R</strong></a>, poderemos produzir texto como esse que você está lendo agora.</p>
<p>A boa notícia é que você não precisará alterar em nada o código escrito em <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> para obtenção de uma saída mais agradável. Você apenas precisará associá-lo à ferramenta correta dispiníveis em <a href="https://www.r-project.org"><strong>R</strong></a>.</p>
</div>
</div>

<p>Antes de conversarmos a respeito das ferramentas disponíveis, em <a href="https://www.r-project.org"><strong>R</strong></a>, para a construção de saídas em HTML mais atraentes, precisaremos entender melhor a sintaxe do <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a>. A seção que segue é dedicada ao entendimento da sintaxe do <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a>.</p>
<div id="sintaxe" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Sintaxe</h3>
<p>Entender a sintaxe de Markdown é algo interessante por alguns motivos. Elencarei três deles abaixo:</p>
<ol style="list-style-type: decimal">
<li><p>A sintaxe de <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> é fácil e não requer uma grande curva de aprendizado;</p></li>
<li><p>Seus documentos podem ser facilmente compartilhados dentro de uma empresa ou grupo de pessoas. Seu relatório em HTML poderá estar hospedado utilizando algum serviço e as pessoas poderão acessar o conteúdo clicando em um link. Por exemplo, não haverá a necessidade de compartilhar arquivos por e-mail ou em dispositivos de armazenamento. Você não precisará levar esse arquivo com você, caso tenha acesso à internet;</p></li>
<li><p><a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> poderá ser utilizado em vários lugares, e não apenas em conjunto com o <a href="https://www.r-project.org"><strong>R</strong></a>. Por exemplo, você poderá utilizar o <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> no GitHub ou no <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a>, site este de perguntas e respostas que é muito útil no aprendizado de programação. Por sinal, aconselho que você crie uma conta e venha utilizado o <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a> para fazer peguntas de programação em <a href="https://www.r-project.org"><strong>R</strong></a>. Há uma comunidade grande de programadores de <a href="https://www.r-project.org"><strong>R</strong></a> no <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a>.</p>
<p>No <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a> você não poderá fazer perguntas genéricas. Se você tiver com problemas em algum código, construa um exemplo do código resumido e explique detalhadamente o seu problema e o que deseja obter. Assim, você terá grandes chances de sua pergunta ser respondida de forma eficiente, cordial e sem correr o risco de ter a sua pergunta apagada por algum moderador.</p>
<p><strong>Nota</strong>:</p>
<p></p>
<div class="rmdnote">
<div class="text-justify">
Por falar em <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a>, a equipe do <a href="https://stackoverflow.com"><strong>Stack Overflow</strong></a> utiliza o <a href="https://www.r-project.org"><strong>R</strong></a> e o <a href="https://www.rstudio.com/"><strong>RStudio</strong></a> em suas análises. Veja um depoimento <a href="https://www.rstudio.com/about/customer-spotlight/increasing-the-impact-of-data-at-stack-overflow/"><strong>aqui</strong></a>.
</div>
</div></li>
</ol>
<p>Utilizar o <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> com o <a href="https://www.r-project.org"><strong>R</strong></a> dentro do <a href="https://www.rstudio.com/"><strong>RStudio</strong></a> é algo interessante e fácil. Porém, para aprender a sintaxe, consideraremos essa <a href="https://daringfireball.net/projects/markdown/dingus"><strong>ferramenta</strong></a>. Por ela, você poderá testar rapidamente o que o que irá aprender.</p>
<div id="paragrafo-cabecalho-e-bloco-de-codigos" class="section level4">
<h4><span class="header-section-number">4.1.1.1</span> Parágrafo, cabeçalho e bloco de códigos</h4>
<p>Um parágrafo em Markdown é constrído por uma ou mais linhas de textos separadas por uma ou mais linhas em branco.</p>
<p></br></p>
<p><strong>Escrevendo três parágrafos em Markdown</strong>:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">Aqui estou criando meu primeiro parágrafo em Markdown. Espero que eu
possa aprender o markdown e assim venha obter sucesso na minha
carreira como estatístico. Darei um espaço abaixo:

Aqui é o meu segundo parágrafo. Só passando para lembrar que R
é uma ótima linguagem de programação. Abaixo colocarei 2 espaços:
  
  
&quot;Qualquer um pode, com algum estudo, escrever códigos que o
computador enteda. Bons programadores esvrevem códigos que
os humanos  entendam.&quot; - Alguém, 5 mil anos a.C.</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p></br></p>
<p><strong>Acrescendando um cabeçalho</strong>:</p>
<p>Você poderá utilizar uma sequencia do caracter <code>=</code> para iniciar uma seção. Analogamente, utilizando o caracter <code>-</code> você poderá criar uma subseção.</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">Um texto com parágrafos soltos
==============================

Aqui estou criando meu primeiro parágrafo em Markdown. Espero que eu
possa aprender o markdown e assim venha obter sucesso na minha
carreira como estatístico. Darei um espaço abaixo:

Aqui é o meu segundo parágrafo. Só passando para lembrar que R
é uma ótima linguagem de programação. Abaixo colocarei 2 espaços:
  

Um programador que não organiza o seu código deveria morrer mais cedo
---------------------------------------------------------------------
  
&quot;Qualquer um pode, com algum estudo, escrever códigos que o
computador enteda. Bons programadores esvrevem códigos que
os humanos  entendam.&quot; - Alguém, 5 mil anos a.C.</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p><strong>Importante</strong>:</p>

<div class="rmdimportant">
<div class="text-justify">
<p>É importante dizer que esse comportamento poderá veriar de uma ferramenta que suporta a sintaxe de <a href="https://daringfireball.net/projects/markdown/"><strong>Markdown</strong></a> para outra. Com o uso frequente de alguma dessas ferramentas, você irá familiarizar-se com algumas possíveis divergências.</p>
</div>
</div>

<p></br></p>
</div>
<div id="secoessubsecoes-aninhadas" class="section level4">
<h4><span class="header-section-number">4.1.1.2</span> Seções/subseções aninhadas</h4>
<p>Podemos utilizar sequências do caracter <code>#</code> para criar seções aninhadas. O código acima poderia ser alterador por:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="fu"># Um texto com parágrafos soltos</span>

Aqui estou criando meu primeiro parágrafo em Markdown. Espero que eu
possa aprender o markdown e assim venha obter sucesso na minha
carreira como estatístico. Darei um espaço abaixo:

Aqui é o meu segundo parágrafo. Só passando para lembrar que R
é uma ótima linguagem de programação. Abaixo colocarei 2 espaços:
  

<span class="fu">## Um programador que não organiza o seu código deveria morrer mais cedo</span>

&quot;Qualquer um pode, com algum estudo, escrever códigos que o
computador enteda. Bons programadores esvrevem códigos que
os humanos  entendam.&quot; - Alguém, 5 mil anos a.C.</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p>De uma forma geral, tem-se:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="fu"># Seção</span>
<span class="fu">## Subseção</span>
<span class="fu">### Subsubseção</span>
<span class="fu">#### Subsubsubseção</span>
...</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p></br></p>
</div>
<div id="bloco-de-frases" class="section level4">
<h4><span class="header-section-number">4.1.1.3</span> Bloco de Frases</h4>
<p>É possível criar, por meio do caracter <code>&gt;</code> frases em bloco. Por exemplo, com a ferramenta que utilizo para a construção desse material, temos abaixo três frases utilizando três níveis de blocos.</p>
<blockquote>
<p>Primeiro nível de bloco.</p>
</blockquote>
<blockquote>
<blockquote>
<p>Segundo nível de bloco.</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>Terceiro nível de bloco.</p>
</blockquote>
</blockquote>
</blockquote>
<pre class="sourceCode markdown"><code class="sourceCode markdown">&gt;<span class="dt"> Primeiro nível de bloco.</span>

&gt;<span class="dt"> &gt; Segundo nível de bloco.</span>

&gt;<span class="dt"> &gt; &gt; Terceiro nível de bloco.</span></code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p></br></p>
</div>
<div id="dando-enfase" class="section level4">
<h4><span class="header-section-number">4.1.1.4</span> Dando ênfase</h4>
<p>É possível que venhamos dar ênfase à um trecho de um texto. Isso é feito utilizando <code>*</code> (asterisco), <code>_</code> (subilinhado/underscore), <code>**</code> (duplo asterisco) ou <code>__</code> (duplo subilinhado/underscore). Essas combinações de caracteres devem envolver o texto a ser destacado e fazem:</p>
<ol style="list-style-type: decimal">
<li><p><code>*</code> (asterisco): Deixa o texto envolvido em <em>itálico</em>. Isso é feito fazendo</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">*texto em itálico*</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote></li>
<li><p><code>_</code> (sublinhado/underscore): Faz o mesmo que <code>*</code>, isto é, deixa o texto envolvido em <em>itálico</em>.</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">_texto em itálico_</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote></li>
<li><p><code>**</code> (duplo asterisco): Deixa o texto envolvido em <strong>negrito</strong>.</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">**texto em negrito**</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote></li>
<li><p><code>__</code>(dublo subilinhado/underscore): Faz o mesmo que envolver o texto por <code>**</code>, isto é, deixa o texto envolvido em <strong>negrito</strong>.</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">__texto em negrito__</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p>O código abaixo faz uso do que aprendemos até aqui:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="fu"># Um texto com parágrafos soltos</span>

Aqui estou criando meu primeiro parágrafo em **Markdown**. Espero que eu
possa aprender o markdown e assim venha obter sucesso na minha
carreira como estatístico. Darei um espaço abaixo:

_Aqui é o meu segundo parágrafo_. Só passando para lembrar que R
é uma ótima linguagem de programação. __Abaixo colocarei 2 espaços__:


<span class="fu">## Um programador que não organiza o seu código deveria morrer mais cedo</span>

*&quot;Qualquer um pode, com algum estudo, escrever códigos que o
computador enteda. Bons programadores esvrevem códigos que
os humanos  entendam.&quot;* - **Alguém**, _5 mil anos a.C_.</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote></li>
</ol>
<p></br></p>
</div>
<div id="listando-itens" class="section level4">
<h4><span class="header-section-number">4.1.1.5</span> Listando Itens</h4>
<p>Em seu texto, é possível que tenha o intenresse de listar itens de forma não ordenada. Isso é possível utilizando os caracteres <code>*</code>, <code>+</code> ou <code>-</code>. Considere o exemplo:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">   * Meu primeiro item;
   * Meu segundo item;
   * Meu terceiro item.
<span class="bn">        </span>
   ou
<span class="bn">        </span>
   + Meu primeiro item;
   + Meu segundo item;
   + Meu terceiro item.
<span class="bn">        </span>
   ou ainda
<span class="bn">        </span>
   - Meu primeiro item;
   - Meu segundo item;
   - Meu teceiro item.</code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
Você poderá intercambiar os caracteres <code>*</code>, <code>+</code> e <code>-</code>. Ou seja, você poderá fazer:
</div>
<pre class="sourceCode markdown"><code class="sourceCode markdown">* <span class="fl">Meu primeiro item;</span>
<span class="fl">+ Meu segundo item;</span>
<span class="fl">- Meu terceiro item.</span></code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>..</p>
</blockquote>
</div>
<p></br></p>
</div>
<div id="enumerando-itens" class="section level4">
<h4><span class="header-section-number">4.1.1.6</span> Enumerando Itens</h4>
<p>As vezes necessitamos de itens dispostos segundo uma ordem. Você poderá ordenar os itens utilizando um número seguido de um ponto. Considere o exemplo abaixo:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">1. <span class="fl">Meu primeiro item enumerado;</span>
<span class="fl">2. Meu segundo item enumerado;</span>
<span class="fl">3. Meu terceiro item enumerado.</span></code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Os itens enumerados ou não enumerados podem ser formados por parágrafos. Você deverá colocar 4 (quatro) espaços para iniciar um parágrafo de um respectivo item. Considere o código abaixo:</p>
</br>
</div>
<pre class="sourceCode markdown"><code class="sourceCode markdown">1. <span class="fl">   Aqui é o meu primeiro item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu primeiro item.</span>

2. <span class="fl">   Aqui é o meu segundo item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu segundo item.</span>

3. <span class="fl">   Aqui é o meu terceiro item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu terceiro item.</span></code></pre>
<p>Essa mesma regra vale para os itens não enumerados. Considere o código abaixo:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">* <span class="fl">    Aqui é o meu primeiro item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu primeiro item.</span>

* <span class="fl">    Aqui é o meu segundo item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu segundo item.</span>

* <span class="fl">    Aqui é o meu terceiro item.</span>
<span class="fl">     </span>
<span class="fl">      Aqui é um novo parágrafo do meu terceiro item.</span></code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
</div>
<p></br></p>
</div>
<div id="criando-links" class="section level4">
<h4><span class="header-section-number">4.1.1.7</span> Criando Links</h4>
<p></br></p>
<p>A linguagem de marcação Markdown te permite inserir links no meio do seu texto. Markdown suporta dois estilos de inserção de links. São eles:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Link não resumido</strong>: As vezes temos o interesse de deixar claro, em nosso texto, qual o endereço completo de um e-mail ou site. Por exemplo, considere o texto do exemplo abaixo:</p>
<p><strong>Exemplo 1</strong>: Se você precisar, acesse o <a href="http://www.de.ufpb.br/" class="uri">http://www.de.ufpb.br/</a> do Departamento de Estatística da UFPB. Também, em caso de necessidade, você poderá mandar um e-mail para mim. Meu e-mail é <a href="mailto:pedro.rafael.marinho@gmail.com" class="email">pedro.rafael.marinho@gmail.com</a>.</p>
<p>A forma geral para a construção de links não resumido é <code>&lt;link&gt;</code>. Para obtermos o retorno acima, devemos fazer:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="bn">    Se você precisar, acesse o &lt;http://www.de.ufpb.br/&gt; do Departamento de Estatística da UFPB. Também, em caso de necessidade, você poderá mandar um e-mail para mim. Meu e-mail é &lt;pedro.rafael.marinho@gmail.com&gt;.</span></code></pre></li>
<li><p><strong>Link resumido</strong>: Trata-se do link que é substituido por um texto sugestivo ao seu conteúdo. Trata-se de uma forma de se construir um link sem a necessidade expor todo o caminho/endereço (froma resumida). Por exemplo, considere o texto do exemplo abaixo:</p>
<p><strong>Exemplo 2</strong>: Se você precisar, acesse o <a href="http://www.de.ufpb.br/"><strong>site</strong></a> do Departamento de Estatística da UFPB. Também, em caso de necessidade, você poerá mandar um <a href="mailto:pedro.rafael.marinho@gmail.com"><strong>e-mail</strong></a> para mim.</p>
<p>A forma geral para construção de links resumido (sugestivos) é <code>[testo do link](link)</code>. Por exemplo, o exemplo cima poderá ser obtido pelo código abaixo:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="bn">    Se você precisar, acesse o [**site**](http://www.de.ufpb.br/) do Departamento de Estatística da UFPB. Também, em caso de necessidade, você poerá mandar um [**e-mail**](mailto:pedro.rafael.marinho@gmail.com) para mim.</span></code></pre></li>
</ol>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p></br></p>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Em se tratando de link resumido, para linkar corretamente um e-mail com o programa de envio e recebimento padrão instalado no computador, você deverá utilizar a expressão <code>mailto:</code> antes da definição do e-mail ao qual deseja linkar com o programa. Por exemplo:</p>
</div>
<pre class="sourceCode markdown"><code class="sourceCode markdown"><span class="ot">[e-mail](mailto:pedro.rafael.marinho@gmail.com)</span></code></pre>
</div>
<p></br></p>
<p>Se você desejar, você poderá ter uma lista enumerada de links ao final do arquivo e invoca-los, por sua numeração, no corpo do seu texto. Considere o texto do exemplo que segue:</p>
<p><strong>Exemplo</strong>: “<strong>Adoro programar</strong> utilizando a linguagem <a href="https://www.r-project.org"><strong>R</strong></a>. Para uma melhor experiência, considere programar utilizando a IDE <a href="https://www.rstudio.com/products/RStudio/">RStudio</a>. Programar em <a href="https://www.r-project.org">R</a> com o <a href="https://www.rstudio.com/products/RStudio/"><strong>RStudio</strong></a> torna a tarefa de programar ainda mais agradável. Mais agradável ainda é saber que a linguagem <a href="https://www.r-project.org">R</a> possui um grande número de <a href="https://cloud.r-project.org/web/packages/available_packages_by_date.html"><em>pacotes</em></a> para trabalhar com estatística.”</p>
<p>Um solução, com o que já aprendemos de Markdown, para esse exemplo acima, poderia ser:</p>
<p><strong>Solução 1</strong>:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">&quot;**Adoro programar** utilizando a linguagem <span class="ot">[**R**](https://www.r-project.org)</span>.
Para uma melhor experiência, considere programar utilizando a IDE
<span class="ot">[RStudio](https://www.rstudio.com/products/RStudio/)</span>. Programar em <span class="ot">[R](https://www.r-project.org)</span> com o <span class="ot">[**RStudio**](https://www.rstudio.com/products/RStudio/)</span>
torna a tarefa de programar ainda mais agradável. Mais agradável
ainda é saber que a linguagem <span class="ot">[R](https://www.r-project.org)</span> possui
um grande número de <span class="ot">[*pacotes*](https://cloud.r-project.org/web/packages/available_packages_by_date.html)</span> para trabalhar com estatística.&quot;</code></pre>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p><strong>Solução 2</strong></p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">&quot;**Adoro programar** utilizando a linguagem <span class="ot">[**R**][1]</span>.
Para uma melhor experiência, considere programar utilizando a IDE
<span class="ot">[RStudio][2]</span>. Programar em <span class="ot">[R][1] </span>com o <span class="ot">[**RStudio**][2]</span>
torna a tarefa de programar ainda mais agradável. Mais agradável
ainda é saber que a linguagem <span class="ot">[R][1] </span>possui
um grande número de <span class="ot">[*pacotes*][3] </span>para trabalhar com estatística.&quot;

<span class="ot">[1]: https://www.r-project.org                                                &quot;R&quot;</span>
<span class="ot">[2]: https://www.rstudio.com/products/RStudio/                                &quot;RStudio&quot;</span>
<span class="ot">[3]: https://cloud.r-project.org/web/packages/available_packages_by_date.html &quot;packages&quot;</span></code></pre>
<p></br></p>
<blockquote>
<p>— Teste <a href="https://daringfireball.net/projects/markdown/dingus"><strong>Aqui</strong></a> ou salve o código em um arquivo com extensão <strong>.md</strong> e, no RStudio, faça <strong>Ctrl + Shift + K</strong>.</p>
</blockquote>
<p></br></p>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Note que o exemplo acima poderá ser útil em situações que que repetimos linkamos uma palavra ao longo de todo o texto. Nesses casos, a linkagem considerando a numeração dos links poderá ser menos cansativa.</p>
</div>
</div>

</div>
<div id="inserindo-figuras-no-texto" class="section level4">
<h4><span class="header-section-number">4.1.1.8</span> Inserindo figuras no texto</h4>
<p>Se você trabalha com estatística muito provavelmente sente corriqueiramente a necessidade de introduzir, em um texto, gráfico(s) e imagen(s) que explica(m) um resultado obtido ou que nos auxilia(m) à etender um detarminado problema. A sintaxe de inserção de figuras é muito semelhante à sintaxe de inserção de <a href="relatorio-markdown-em-r.html#criando-links">links</a>.</p>
<p><strong>Exemplo</strong>: Suponha que desejamos inserir o logo da linguagem de programação <a href="https://www.r-project.org"><strong>R</strong></a>, na forma abaixo:</p>
<p></br></p>
<center>
<img src="https://www.r-project.org/logo/Rlogo.png" width="100" height="100" /> </br>
Figura: Logo da linguagem de programação <strong>R</strong> obtido em <a href="https://www.r-project.org/logo/Rlogo.png"><strong>aqui</strong></a>.
</center>
<p></br></p>
<p>A Figura acima poderá ser inserida na forma que segue:</p>
<pre class="sourceCode markdown"><code class="sourceCode markdown">&lt;center&gt;
![](https://www.r-project.org/logo/Rlogo.png){height=&quot;100px&quot; width=&quot;100px&quot;} &lt;/br&gt;
Figura: Logo da linguagem de programação **R** obtido em <span class="ot">[**aqui**](https://www.r-project.org/logo/Rlogo.png)</span>.
&lt;/center&gt;</code></pre>
<p></br></p>
<p><strong>Observação</strong>:</p>

<div class="rmdobservation">
<div class="text-justify">
<p>Poderá ser que a depender de onde você esteja testando esse código, a expressão <code>{height="100px" width="100px"}</code> não venha funcionar. Além disso, não se preocupe com o alinhamento da imagem nem com outros pormenores. Com pouco esforço e utilizando as ferramentas necessárias de R, tudo se ajustará. O objetivo aqui é apenas expor o básico da sintaxe de Markdown.</p>
<p>Você poderá achar estranho algumas sintaxes acima. Abaixo esclareço todas elas:</p>
<ul>
<li><code>&lt;center&gt;</code> … <code>&lt;/center&gt;</code>: Essas expressões faz com que tudo o que está envolvido entre elas sejam centralizados na página em HTML que será gerada. Essas expressões também poderá ser útil para centralizar textos.</li>
</ul>
<blockquote>
<p><strong>Exemplo</strong>: Reproduza o exemplo que segue:</p>
</blockquote>
</div>
<blockquote>
<blockquote>
<pre class="sourceCode markdown"><code class="sourceCode markdown">   &lt;center&gt;
   Envolver algum texto entre <span class="bn">`&lt;center&gt;`</span>e
   &lt;/center&gt;

   &lt;center&gt;
   fará com que tudo que esteja envolvido seja centralizado.
   &lt;/center&gt;</code></pre>
</blockquote>
</blockquote>
<ul>
<li><p><code>&lt;/br&gt;</code>: Trata-se de um expressão de HTML responsável por pular uma linha. Essa expressão poderá ser utilizada em qualquer lugar do seu código escrito em Markdown.</p></li>
<li><p><code>{height="100px" width="100px"}</code>: Essa expressão é utilizada para definirmos as dimensões da imagens, a ser inserida, nesse caso em pixels, altura e largura, respectivamente.</p></li>
</ul>
</div>
<pre><code>
#### Exercícios {-}

1. Construa um código em Markdown que retorne a saída abaixo:

    **R** é um ambiente de software livre para computação estatística e gráficos. Ele compila e é executado em uma ampla variedade de plataformas **UNIX**, **Windows** e **MacOS**. Para fazer o download do **R**, escolha o seu espelho **CRAN** (_Comprehensive R Archive Network_) preferido.

2. Modifique o código em Markdown utilizado no exercício anterior para que forneça:

    [**R**](https://www.r-project.org/) é um ambiente de software livre para computação estatística e gráficos. Ele compila e é executado em uma ampla variedade de plataformas **UNIX**, **Windows** e **MacOS**. Para fazer o download do [**R**](https://www.r-project.org/), escolha o seu espelho **CRAN** ([_**C**omprehensive **R** **A**rchive **N**etwork_](https://cloud.r-project.org/web/packages/available_packages_by_date.html)) preferido.

3. Construa o código em Markdown que forneça uma saída próxima a da imagem abaixo:

    ![](images/ex_markdown_01.png)

4. Forneça o código Markdown para a obtenção do resultado que segue:

    1. **Aqui é o item 1**:

       1. Subitem 1
       2. Subitem 2
       3. Subitem 3

    2. **Aqui é o item 2**:

       + Subitem 1
       + Subitem 2
       + Subitem 3

    3. **Aqui é o item 3**:

       1. Subitem 1
          + Subsubitem 1
          + Subsubitem 2
       2. Subitem 2
          1. Subsubitem 1
          2. Subsutitem 2

&lt;/br&gt;

5. Forneça o código Markdown que retore o resultado que segue:

    1. **Aqui é o item 1**:

       1. Eu serei um programador de [**R**](https://www.r-project.org/). Eu prometo de sempre serei fiel, na                alegria e na tristeza, até que a morte           nos separe...

          Além dos votos acima, abaixo segue **dois** motivos para você apresender a programar em                            [**R**](https://www.r-project.org/):

          - Se você não programar, você não irá passar na disciplina. =(

            &gt; ***Acho que o motivo acima é suficiente***.

          - R é uma linguagem legal.

       2. ***[**R**](https://www.r-project.org/) tem vários                                                                  [pacotes](https://cloud.r-project.org/web/packages/available_packages_by_date.html)***:


    2. &gt; Mais algumas coisas **...** :

       &gt; &gt; Bla bla bla bla bla bla bla bla **...**

       + &gt; &gt; &gt; Bla Bla
       + &gt; &gt; &gt; &gt; **...**

       Se tudo der errado, mande um email para **&lt;jesus@aomeudeus.com&gt;** com o título: &quot;**Estou Chegando**&quot;.

6. Considere o a imagem desse [**link**](https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg). Crie um arquivo Markdown de modo a ser inserido a imagem com dimensões 50 por 50 pixels centralizada no HTML resultante após a compilação. O resultado que você deverá obter é o que segue:

&lt;center&gt;
![](https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-flat.svg){eight=&quot;250px&quot; width=&quot;250px&quot;}&lt;/br&gt;
**Figura**: Importando o logo do [**RStudio**](https://www.rstudio.com/) figura qualquer.
&lt;/center&gt;

## R Markdown

Se você chegou à esse ponto da leitura, muito provavelmente deverá estar se perguntando sobre muitas coisas. Algumas dessas perguntas poderiam ser:

   1. Como referenciar um texto ou figura?
   2. E se eu quiser colocar figuras lado a lado?
   3. Como incorporar fórmulas matemáticas no corpo do texto?
   4. Como colocar referências no texto?
   5. É possível incorporar tabelas?
   &lt;!-- 6. ~~Eu irei conseguir me formar? O que eu estou fazendo aqui?~~ --&gt;

As respostas à estas perguntas não foram respondidas por serem bastante inconveniente ou mesmo impossível de respondê-las utilizando a linguagem [**Markdown**](https://daringfireball.net/projects/markdown/). A linguagem [**Markdown**](https://daringfireball.net/projects/markdown/) é bastante simples e útil para muitos casos. Aliás, na maior parte do tempo estamos utilizando a sintaxe de [**Markdown**](https://daringfireball.net/projects/markdown/), sendo que algumas vezes é que nós nos deparamos com com algumas dessas necessidades.

Visando atender à diversas exigências, entre elas as que estão enumeradas acima, houve a necessidade de se extender a sintaxe do [**Markdown**](https://daringfireball.net/projects/markdown/) em [**R**](https://www.r-project.org). Essas necessidades corriqueiras são atendidas pelo pacote [**rmarkdown**](https://cran.r-project.org/web/packages/rmarkdown/index.html) que disponibiliza ao usuário o [**R Markdown**](https://rmarkdown.rstudio.com/). O pacote [**rmarkdown**](https://cran.r-project.org/web/packages/rmarkdown/index.html) foi criado por [**Yihui Xie**](https://yihui.name/en/about/), PhD em estatística e que atualmente trabalha como engenheiro de software na [**RStudio, Inc**](https://www.rstudio.com/). Yihui Xie atualmente mantem diversos pacotes em R em seus [**repositórios**](https://github.com/yihui) no GitHub.

&lt;div class=&quot;figure&quot; style=&quot;text-align: center&quot;&gt;
&lt;img src=&quot;images/logo_rmarkdown.png&quot; alt=&quot;Logo do pacote [**rmarkdown**](https://cran.r-project.org/web/packages/rmarkdown/index.html) - permite programadores [**R**](https://www.r-project.org) extender a sintaxe de marcação [**Markdown**](https://daringfireball.net/projects/markdown/) utilizando [**R Markdown**](https://rmarkdown.rstudio.com/).&quot; width=&quot;25%&quot; /&gt;
&lt;p class=&quot;caption&quot;&gt;(\#fig:unnamed-chunk-35)Logo do pacote [**rmarkdown**](https://cran.r-project.org/web/packages/rmarkdown/index.html) - permite programadores [**R**](https://www.r-project.org) extender a sintaxe de marcação [**Markdown**](https://daringfireball.net/projects/markdown/) utilizando [**R Markdown**](https://rmarkdown.rstudio.com/).&lt;/p&gt;
&lt;/div&gt;

Como dito anteriormente, para fazer uso de [**R Markdown**](https://rmarkdown.rstudio.com/) será necessário o uso do pacote [**rmarkdown**](https://cran.r-project.org/web/packages/rmarkdown/index.html). Esse pacote, por sua vez, trabalha sobre duas importantes ferramentas. São elas:

1. [**knitr**](https://yihui.name/knitr/): Um [**pacote**](https://cran.r-project.org/web/packages/knitr/index.html) também criado por Yihui Xie e que hoje possui diversos colaborados.  O pacote [**knitr**](https://yihui.name/knitr/) permite converter um texto escrito em R Markdown (arquivo com extensão **.Rmd**) para Markdown (arquivo com extensão **.md**). Em 2012, o pacote **knitr** já permitia com algumas linguagens de marcação, entre as mais importantes destacam-se a linguagem LaTeX e HTML. Apenas em 2015 é que foi introduzido o **R Markdown** (arquivos com extensão **.Rmd**), uma vez que o Markdown tinha se mostrado ser um formato de documento popular e bastante utilizado pela comunidade.

2. [**Pandoc**](https://pandoc.org/): Um &quot;canivete suíço&quot; escrito utilizando a linguagem de programação [**Haskell**](https://www.haskell.org/) e que permite converter textos escritos em uma linguagem de marcação para outra. Muito embora você não precisa utilizar diretamente os comandos do Pandoc quando fizer uso do pacote rmarkdown, você poderá instalar facilmente o Pandoc em seus sistema operacional e utilizar o Pandoc para converter arquivos **.tex** (TeX) em **.docx** (DOCX, formato relacionado com a ferramenta Microsoft Word), **.md** (Markdown) em **.pdf** (PDF), **.tex** (LaTeX) para **.md** (Markdown), entre diversas outras conversões. Maiores detalhes a repseito das possíveis conversões você encontrará [**aqui**](https://pandoc.org/demos.html).

**Nota**:

\BeginKnitrBlock{rmdnote}&lt;div class=&quot;rmdnote&quot;&gt;&lt;div class=text-justify&gt;
Com o **R Markdown** teremos a nossa disposição diversas ferramentas e ainda poderemos usufruir da simplicidade do **Markdown**.
&lt;/div&gt;&lt;/div&gt;\EndKnitrBlock{rmdnote}

O funcionamento geral e interações entre o pacote **rmarkdown** com o pacote **knitr** e o **Pandoc** poderão ser resumidos com diagrama abaixo:

&lt;div class=&quot;figure&quot; style=&quot;text-align: center&quot;&gt;
<div id="htmlwidget-86b3c8b3f0133112bbe3" style="width:800px;height:400px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-86b3c8b3f0133112bbe3">{"x":{"diagram":"\ngraph TD\n\nA((.Rmd))-->|knitr|B((.md))\nB-->|Pandoc|C((.html))\nB-->|Pandoc|D((.pdf))\nB-->|Pandoc|E((.epub))\nB-->|Pandoc|F((.odt))\nB-->|Pandoc|G((.docx))\nB-->|Pandoc|H((.tex))\nB-->|Pandoc|I((outros))\n\nstyle A fill:#ffe5cc\nstyle B fill:#ffe5cc\nstyle C fill:#ffe5cc\nstyle D fill:#ffe5cc\nstyle E fill:#ffe5cc\nstyle F fill:#ffe5cc\nstyle G fill:#ffe5cc\nstyle H fill:#ffe5cc\nstyle H fill:#ffe5cc\n"},"evals":[],"jsHooks":[]}</script>
&lt;p class=&quot;caption&quot;&gt;(\#fig:diagramaRmd)Funcionamento do pacote **rmarkdown** que permite trabalharmos com arquivos .Rmd e sua interação com o **knitr** e **Pandoc** na converção para formatos intermediários.&lt;/p&gt;
&lt;/div&gt;

Como podemos observar no diagrama \@ref(fig:diagramaRmd), o pacote **knitr** é responsável por converter o arquivo **.Rmd** que contém códigos em **R Markdown** para um arquivo **.md** que contém código em **Markdown** puro. Depois, o Pandoc irá agirar sobre o aquivo **.md** e irá converter para o formato desejado, em que por padrão, o formato é **.html**. A conversão para HTML é de longe a mais utilizada, uma vez que trata-se de um formato que facilita o compartilhamento do seu conteúdo, sendo possível, por exemplo, hospedar os HTMLs gerados em um servidor para o acesso de qualquer lugar, desde que se tenha um browser e uma conecção com uma rede de internet.

O pacote **knitr** também incorpora algumas funcionalidades quando estamos trabalhando com **R Markdown**, em que a mais importante delas é a possibilidade de incorporar e avaliar pedaços (**chuncks**) de códigos R dentro do documento, isto é, dentro do arquivo **.Rmd**. Essa é uma grande funcionalidade que nos permitirá fazer duas coisas importantes:

1. Utilizar funções de R para plotagem de gráficos;
2. Incorporar retornos de funções no interior do relatório;

**Nota**:

\BeginKnitrBlock{rmdnote}&lt;div class=&quot;rmdnote&quot;&gt;&lt;div class=text-justify&gt;
Acima listei apenas duas funcionalidades de julgo como mais importantes do pacote **knitr**, além, é claro, de converter arquivos **R Markdown** para arquivos em **Markdown** puro.

Uma outra funcionalidade do pacote **knitr** que vale a pena ser destacada aqui, é a possibilidade de utilizar uma de suas função para incorporá figuras previamente salvas (os formatos mais populares de imagens são suportados) e controrar seu tamanhol, título, alinhamento bem como outras características de interesse.
&lt;/div&gt;&lt;/div&gt;\EndKnitrBlock{rmdnote}

**Importante**:

\BeginKnitrBlock{rmdimportant}&lt;div class=&quot;rmdimportant&quot;&gt;&lt;div class=text-justify&gt;
Tudo que você aprendeu a respeito de **Markdown** continuará valendo para arquivos **R Markdown** (arquivos com extensão **.Rmd**).
&lt;/div&gt;&lt;/div&gt;\EndKnitrBlock{rmdimportant}

Antes de iniciarmos as próximas seções a respeito do **R Markdown**, certifique-se que você possue o **rmarkdown** e o **knitr** instalados. Muito provavelmente esses pacotes juntamente com o Pandoc já estarão instalados, caso você esteja utilizando o RStudio.

Em todos os exemplos que seguem nas seções que seguem, no **RStudio**, acesse as opções *File*, *New File* e *R Markdown*, respectivamente, para criar um novo arquivo **R Mardown** (arquivo com extensão **.Rmd**). Você também poderá utilizar as teclas de atalho **Ctrl + Shift + N** para criar um arquivo com extensão **.R** e no momento de salvar mude a extensão do arquivo para **.Rmd**.

**Nota**:

\BeginKnitrBlock{rmdnote}&lt;div class=&quot;rmdnote&quot;&gt;&lt;div class=text-justify&gt;
Você poderá compilar o código de **R Markdown** de três formas:

  1. Utilizando, no RStudio, a combinação das teclas de atalho **Ctrl + Shift + K**;
  2. Clicando no ícone do pacote **knitr**;
  3. Utilizando a função `rmarkdown::render(input = &quot;arquivo.Rmd&quot;)`. Será criado no diretório de trabalho o arquivo       **arquivo.html**.
&lt;/div&gt;&lt;/div&gt;\EndKnitrBlock{rmdnote}


&lt;!-- ### Inserção de código R --&gt;





&lt;!--chapter:end:rmarkdown.Rmd--&gt;

# R - miscelânea e tópicos avançados

Nesse ponto será assumido que você realizou os passos de [**revisão**][Sugestões de passos para revisão da linguagem R] da linguagem R sugeridos, bem como resolveu os [**exercícios propostos**][Exercícios propostos]. Considerá-los é de grande importância para que você consiga assimilar os conceitos apresentados nesse [**Capítulo**][R - miscelânea e tópicos avançados].

Esse [**Capítulo**][R - miscelânea e tópicos avançados] visa apresentar algumas miscelâneas a respeito da linguagem de programação R, bem como, alguns tópicos mais avançados de programação em R. O termo &quot;**avançado**&quot; utilizado aqui não necessariamente tem correlação com dificuldade de entendimento. Aqui utilizo esse termo para abordar assuntos que normalmente eram pouco discutidos em livros mais antigos da linguagem R e que atualmente vem ganhando destaques em livros e discussões mais recentes na internet. Na verdade, a maioria dos conceitos que serão abordados são de fácil compreensão, porẽm ajudarão os programadores em R a construir códigos mais robustos e mais flexíveis. Alguns desses assuntos que serão abordados e divididos em subseções são:

  1. Pipe %&gt;%
  
  2. Funções: 
    
     - Funcionais
    
     - Closures
    
     - dot-dot-dot, ..1 e etc
     
     - Orientação à objeto por função genérica (sistema S3)
     
   3. Regex
   
   4. Tópicos em metaprogramação
   
   5. Paralelismo
   
   6. Empacotando funções
   

## Operador %&gt;% - Pipe   
   
    
Para que possamos entender a utilidade dos operadores pipe, em especial do operador `%&gt;%`, vamos fazer um pão de queijo. Adiante, você encontrará a receita com 7 passos enumerados que deverão serem seguidos para que possamos fazer o nosso pão de queijo.

**Nota**:

\BeginKnitrBlock{rmdnote}&lt;div class=&quot;rmdnote&quot;&gt;&lt;div class=text-justify&gt;
Esse material não garante que você terá sucesso, caso seja curioso e tente fazer a receita. Foque apenas no código. E se você for de Minas Gerais e saiba fazer pão de queijo, desconsidere qualquer inconsistência na receita. =)
&lt;/div&gt;&lt;/div&gt;\EndKnitrBlock{rmdnote}

**Ingredientes**: 2 copos americanos de leite, 1 copo americano de água, 1/3 de um copo americano de óleo, 1 colher de sopa de sal, 500g de povilho doce, queijo ralado a gosto, 3 ovos.

**Passos do Preparo**:

   1. **Ferva** o leite com a água e o óleo;

   2. Em uma vasilha **misture** o polvilho e o sal;
   
   3. **Jogue** o liquido fervido e **misture** com uma colher grande;
   
   4. **Espere** esfriar (30 minutos) e **despeje** o queijo ralado e os ovos;
   
   5. **Misture** a massa com a mão **amassando** até ficar homogênea;
   
   6. **Faça** bolinhas do tamanho que preferir;
   
   7. **Sirva** quentinho;
   
Assuma, por absurdo, que poderemos fazer nossos pães de queijo no R que que os verbos destacados nos passos acima são funções que implementamos em R. Dessa forma, forma, pelo que sabemos de R, poderemos fazer nossos pães de queijo de forma que segue:

```r
sirva(fazer(misture(despeje(esperar(misture(ingredientes = c(povilho, sal), add = ferver(c(leite, óleo),
      add_agua = TRUE), colher_grande = TRUE), tempo = 30), homogenea = TRUE),
      modo = &quot;amassando&quot;), formato = &quot;bolinha&quot;), modo = &quot;quentinho&quot;)</code></pre>
<p>Perceba que o código acima poderá ser um pouco confuso, uma vez que envolve muitas composições de funções. Porém, nada impede que você esteja salvando os resultados intermediários em objetos, de modo a facilitar a leitura do código ao relacionar esses objetos intermediários. Fazer isso funciona bem e eu particularmente utilizo muito. Porém, você também poderá fazer uso de pipes (operador <code>%&gt;%</code>) que poderá, nessas situações, deixar a leitura do código mais fácil, lógica e consequentimente mais compreensível., como veremos adiante.
O operador de tubo <code>%&gt;%</code> foi implementando no pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a> por <a href="https://github.com/smbache"><strong>Stefan Milton Bache</strong></a> e atualmente recebe a colaboração de diversas pessoas, incluindo programadores da <a href="https://www.rstudio.com/"><strong>RStudio, Inc</strong></a>. Atualmente, o pacote não recebe muitas atualizações, muito provavelmente por já está estável e cumprindo bem o seu papel.</p>
<p>O nome <strong>magrittr</strong> muito provavelmente faz alusão à <a href="https://pt.wikipedia.org/wiki/Ren%C3%A9_Magritte"><strong>René Magritte</strong></a>, um dos principais pintores surrealista belga, em que a letra <strong>r</strong>, ao final, obviamente faz referências à linguagem R. É possível inferir isso com base no logo do pacote, apresentado logo abaixo:</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="images/logo_magrittr.png" alt="Logo do pacote [**magrittr**](https://github.com/tidyverse/magrittr) com frase ***Ceci n'est pas une pipe*** ([**ouça a pronuncia**](files/audio_magrittr.ogg), mesmo frase que acompanha pintura ***La trahison des images*** de [**René Magritte**](https://pt.wikipedia.org/wiki/Ren%C3%A9_Magritte)." width="25%" />
<p class="caption">
Figura 4.4: Logo do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a> com frase <strong><em>Ceci n’est pas une pipe</em></strong> (<a href="files/audio_magrittr.ogg"><strong>ouça a pronuncia</strong></a>, mesmo frase que acompanha pintura <strong><em>La trahison des images</em></strong> de <a href="https://pt.wikipedia.org/wiki/Ren%C3%A9_Magritte"><strong>René Magritte</strong></a>.
</p>
</div>
<p>Voltemos à algo mais interessante, ao preparo de pães de queijo. O preparo, “em R”, poderia ser quase tão saboroso quanto comer os pães de queijo, se fossem “preparados” utilizando o operador <code>%&gt;%</code>, na forma que segue:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fazendo pão de queijo utilizando o operador pipe, isto é,</span>
<span class="co"># utilizando o operador %&gt;%.</span>

<span class="kw">ferver</span>(<span class="dt">ingradientes =</span> <span class="kw">c</span>(leite,  água,  óleo)) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">misturar</span>(<span class="dt">colher_grande =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">esperar</span>(<span class="dt">tempo =</span> <span class="dv">30</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">despejar</span>(<span class="dt">ingredientes =</span> <span class="kw">c</span>(<span class="st">&quot;queijo&quot;</span>, <span class="st">&quot;ovos&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">amassar</span>(<span class="dt">forma =</span> <span class="st">&quot;mãos&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fazer_bolinhas</span>(<span class="dt">volume =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">   </span><span class="kw">sirvir</span>(<span class="dt">froma =</span> <span class="st">&quot;quentinho&quot;</span>)</code></pre>
<p>É possível observar que o código acima é consideravelmente mais legível que o código apresentado mais acima desta subseção. O código acima é mais legível, por que os verbos/funções são encadeadas na sequência lógica do preparo e não lidos de dentro para fora, como no primeiro exemplo. Olhando rapidamente para cada um dos códigos, percebemos que o código que faz uso do operador <code>%&gt;%</code> fornece mais informações a respeito do que se está à fazer.</p>
<p><strong>Importante</strong>:</p>

<div class="rmdimportant">
<p>Apesar de ser um operador útil, não exagere no uso de <code>%&gt;%</code>, principalmente quando se tem um conjunto de passos demasiadamente grande. Nessas situações, procure atribuir parte do código à objetos intermediários e depois componha esses objetos. Além disso, as funções envolvidas possuem diversas entradas e saídas, pode ser que o uso do operador <code>%&gt;%</code> não seja interessante.</p>
No RStudio, você poderá utilizar o atalho <strong>Ctrl + Shift + M</strong> como atalho para escrever mais rapidamente o operador <code>%&gt;%</code>.
</div>

<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<p>Como curiosidade, o recurso de pipes estão disponíveis em outras linguagens de programação, como <a href="https://pt.wikipedia.org/wiki/F_Sharp"><strong>F#</strong></a>, e os pielines de sistemas *<strong>nix</strong> que usa pipes para a <a href="https://en.wikipedia.org/wiki/Pipeline_(Unix)"><strong>comunicação entre os processos</strong></a> utilizando passagem de mensagens.</p>
</div>
</div>

<p>Você poderá instalar o <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a> diretamente pelo CRAN ou por meio do repositório GitHub do pacote, ou seja, por meio de um dos comandos abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Instalando o pacote magrittr disponível</span>
<span class="co"># nos repositórios do CRAN.</span>
<span class="kw">library</span>(magrittr)

<span class="co"># ou</span>

<span class="co"># Para instalar pacotes diretamente do GitHub,</span>
<span class="co"># você de deve ter instalado o pacote</span>
<span class="co"># devtools para poder fazer uso da função</span>
<span class="co"># install_github().</span>

<span class="co"># Instalando o repositório magrittr do usuário/organização de</span>
<span class="co"># nome tidyverse do GitHub.</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/magrittr&quot;</span>, <span class="dt">ref =</span> <span class="st">&quot;master&quot;</span>) </code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Há pontos positivos e negativos ao considerar a instalação de um pacote diretamente do epositório do pacote no GitHub ou em qualquer outro sistema de hospedagem de código. Mencionarei apenas GitHub, mas o comentário se extende à outros sistemas de hospedagem de códigos, como, por exemplo, o GitLab.</p>
<p>Basicamente, o ponto positivo refere-se à possibilidade de estarmos instalando uma versão mais recente do pacote, porém, em alguns casos, o pacote poderá apresentar alguns bugs, muito embora os códigos no <strong><em>branch master</em></strong> são normalmente estáveis e possuem códigos iguais aos que temos no CRAN.</p>
<p>Instalar diretamente um pacote que está sendo mantido no GitHub dará a possibilidade de instalar versões mais recentes do pacote que ainda não encontram-se no CRAN. Pelo GitHub, você também terá a vantagem de instalar versões mais antigas do pacote. Por exemplo, no repositório do <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a>, no GitHub, você verá que, em <strong><em>Branch</em></strong>, haverá diversas versões versionadas do pacote, em que uma delas chama-se <strong>dev</strong>. Fazer <code>devtools::install_github("tidyverse/magrittr", ref = "dev")</code> fará com que você instale a versão de desenvolvimento do pacote. Dessa forma, aconselho que sempre considere a instalação da versão no <strong><em>branch master</em></strong> de qualquer pacote que venha instalar diretamente do GitHub. Assim, haverá menos possibilidade de você deparar-se com códigos que ainda não funcionam ou que possuam algum(s) bug(s).</p>
</div>
</div>

<p>Para um entendimento geral do operador <code>%&gt;%</code>, considere a existência dos objetos <code>x</code>, <code>y</code>e <code>f</code>. Então,</p>
<pre class="{r},"><code>x %&gt;% f(y)</code></pre>
<p>irá atribuir o objeto <code>x</code> à <code>f</code>, como <strong>primeiro argumento</strong> da função <code>f</code>, ou seja, será equivalente à fazer <code>f(x, y)</code>.</p>
<p>Porém, nem sempre desejamos introduzir o que está a esquerda do operador <code>%&gt;%</code> como primeiro agumento daquilo que está à sua direita. Para isso, poderemos fazer uso do caracter <code>.</code> (ponto). Esse caracter irá designar em qual posição será introduzido o objeto à esquerda de <code>%&gt;%</code> na função à sua direita. Por exemplo, a expressão <code>x %&gt;% f(a, b = .)</code> fará com que <code>x</code> à esqueda de <code>%&gt;%</code> seja substituído no lugar do caracter <code>.</code>, ou seja, <code>x</code> é passado como argumento à <code>b</code>, segundo argumento de <code>f</code>.</p>
<p><strong>Exemplo</strong>: Uso do caracter <code>.</code> em um contexto de bloco de instrução. Esse exemplo mostra que o que está a direita do operador <code>%&gt;%</code> não necessariamente precisa ser uma função. Nesses casos, o caracter <code>.</code> é de grande importância para que o operador saiba substituir corretamente o objeto <code>x</code> no bloco de instruções.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)
x &lt;-<span class="st"> </span>mtcars
x <span class="op">%&gt;%</span><span class="st"> </span>{
  <span class="cf">if</span> (<span class="kw">is.data.frame</span>(.) <span class="op">||</span><span class="st"> </span><span class="kw">is.matrix</span>(.)){
    <span class="kw">cat</span>(<span class="st">&quot;A dimensão dos dados é&quot;</span>, <span class="kw">dim</span>(.))
  } <span class="cf">else</span> {
    <span class="kw">cat</span>(<span class="st">&quot;Objeto não é uma matriz ou um data frame&quot;</span>)
  }
}</code></pre>
<pre><code>## A dimensão dos dados é 32 11</code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Observe que, por exemplo, fazer <code>x %&gt;% f(., y = 1)</code> equivale a fazer <code>x %&gt;% f(y = 1)</code>, uma vez que por padrão, o objeto que está à esquerda de <code>%&gt;%</code>sempre será substituído como primeiro argumento da função que está mais a sua direta, caso não seja utilizado o caractere <code>.</code> para indicar o lugar do substituição.</p>
</div>
</div>

<p>Um outro operador útil disponível no pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a> é o operator <strong><em>tee</em></strong>, denotado por <code>%T&gt;%</code>. Esse operador funciona de forma muito parecida com o operador <code>%&gt;%</code>, exceto pelo fato de que ele irá retornar o conteúdo do lado esquedo e <strong>não</strong> o resultado da operação do seu lado diretio.</p>
<p>O uso do operador <code>%T&gt;%</code> não é tão comum. Normalmente a frequência de uso do operador <code>%&gt;%</code> é muito maior. Porém, veja que não é possível resolver o exemplo que segue utilizando apenas o operador <code>%&gt;%</code>.</p>
<p><strong>Exemplo</strong>: Pelo que entendemos do operador <code>%&gt;%</code>, não faz nenhum sentido o código abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fixando uma semente.</span>
<span class="kw">set.seed</span>(<span class="dv">0</span>) 
<span class="kw">rnorm</span>(1000L) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">hist</span>(., <span class="dt">main =</span> <span class="st">&quot;Histograma Qualquer&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;x&quot;</span>,
                      <span class="dt">ylab =</span> <span class="st">&quot;Frequência&quot;) %&gt;% mean </span></code></pre>
<pre><code>## Warning in mean.default(.): argumento não é numérico nem lógico: retornando
## NA</code></pre>
<p><img src="r_files/figure-html/unnamed-chunk-9-1.png" width="384" style="display: block; margin: auto;" /></p>
<pre><code>## [1] NA</code></pre>
<p>Nesse exemplo, observamos que o histograma foi construído, porém, não faz nenhum sentido passar um gráfico à função <code>mean</code>. Muito provavelmente o desejo de quem viria escrever um código como esse seria tirar a média do vetor resultante do código <code>rnorm(1000L)</code>. Nessas situações, poderemos fazer uso do operador <code>%T&gt;%</code> (operador <strong><em>tee</em></strong>).</p>
<p><strong>Exemplo</strong>: Aqui temos um típico uso do operador <code>%T&gt;%</code>. Perceba que utilizando o perador <code>%T&gt;%</code>, foi possível passar <code>rnorm(1000L)</code> como argumento à função <code>hist</code>, assim como seria possível utilizando o operador <code>%&gt;%</code>. Porém, com o operador <code>%T&gt;%</code>, conseguimos passar <code>rnorm(1000L)</code> à função <code>mean</code> e não à função <code>hist</code>, que seria esperado se utilizássemos o operador <code>%&gt;%</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fixando uma semente.</span>
<span class="kw">set.seed</span>(<span class="dv">0</span>) 
<span class="kw">rnorm</span>(1000L) <span class="op">%T&gt;%</span><span class="st"> </span><span class="kw">hist</span>(., <span class="dt">main =</span> <span class="st">&quot;Histograma Qualquer&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;x&quot;</span>,
                       <span class="dt">ylab =</span> <span class="st">&quot;Frequência&quot;) %&gt;% mean </span></code></pre>
<p><img src="r_files/figure-html/unnamed-chunk-10-1.png" width="384" style="display: block; margin: auto;" /></p>
<pre><code>## [1] -0.01582957</code></pre>
<p>Um outro operador pipe que é bastante útil é o perador de exposição, denotado por <code>%$%</code>. Trata-se de um operador que é bastante útil quando estamos trabalhando com (quadro de dados) data frames ou matrizes, onde temos variáveis dispostas em suas colunas. Com esse operador, poderemos tornar visíveis as variáveis do objeto à sua esquerda nas funções à sua direita. Considere o exemplo que segue:</p>
<p><strong>Exemplo</strong>: No código que segue, estamos tornando visíveis as variáveis do objeto <code>mtcars</code> na função <code>cor</code>. Dessa forma, poderemos calcular a correlação entre as variáveis <strong>cyl</strong> e <strong>hp</strong> do data frame <strong>mtcars</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%$%</span><span class="st"> </span><span class="kw">cor</span>(cyl, hp)</code></pre>
<pre><code>## [1] 0.8324475</code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Normalmente esse operador é útil quando a função a direita não possui argumento de dados. Por exemplo, se o objetivo fosse calcular uma regressão linear simples com essas variáveis, poderíamos fazer:</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">lm</span>(cyl <span class="op">~</span><span class="st"> </span>hp, <span class="dt">data =</span> .)</code></pre>
<pre><code>## 
## Call:
## lm(formula = cyl ~ hp, data = .)
## 
## Coefficients:
## (Intercept)           hp  
##     3.00680      0.02168</code></pre>
<p>uma vez que a função <code>lm</code> já possui um argumento para o conjunto de dados a ser utilizado. Ao passar o conjunto de dados para a função <code>lm</code>, todas as variáveis de <strong>mtcars</strong> estarão visíveis no interior da função <code>lm</code>.</p>
</div>
<p>Por fim e não menos importante, existe o operador de pipe compostos, denotado por <code>%&lt;&gt;%</code>. Esse operador é útil quando queremos realizar uma operação e atribuir essa modificação ao objeto à esquerda do operador. Considere um exemplo de uso do operador de pipe composto:</p>
<p><strong>Exemplo</strong>: Utilizando o operador <code>%&lt;&gt;%</code> para alterar o conteúdo da variável <strong>disp</strong> do data frame <strong>mtcars</strong>. Perceba que ao chamar mtcars, a variável <strong>disp</strong> agora é do tipo inteiro.</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars<span class="op">$</span>disp <span class="op">%&lt;&gt;%</span><span class="st"> </span><span class="kw">as.integer</span>()
<span class="kw">str</span>(mtcars)</code></pre>
<pre><code>## &#39;data.frame&#39;:    32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: int  160 160 108 258 360 225 360 146 140 167 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
<p><strong>Observação</strong>:</p>

<div class="rmdobservation">
<div class="text-justify">
<p>Alguns pacotes de R possuem vinhetas que facilitam o entendimento das funções empacotadas. Não necessariamente as vinhetas irão dissertar sobre todas as funções implementadas. Porém, essas vinhetas normalmente focam no que há de mais importante no pacote. Você poderá encontrar a vinheta do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a> <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html"><strong>aqui</strong></a>. Normalmente essas vinhetas são mais fáceis de serem lidas do que as documentações dos pacotes. Porém, consultar a documentação é o caminho correto para encontrar as respostas mais difícies e que muitas vezes não são abordadas nas vinhetas.</p>
</div>
</div>

</div>
</div>
<div id="exercicios" class="section level3 unnumbered">
<h3>Exercícios</h3>
<p>Resolva os exercícios que seguem. Os operadores pipes que você utilizará para resolver os exercícios não necessariamente irão produzir as melhores soluções. Porém, esses exercícios farão você pensar a respeito do emprego dos operadores e, aqui, é isso o que importará.</p>
<ol style="list-style-type: decimal">
<li><p>Resolva os itens abaixo utilizando o operador <code>%&gt;%</code> do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a>:</p>
<ul>
<li><p><code>as.character(log(cos(sin(pi))))</code></p></li>
<li><p><code>round(var(seq(from = 1, to = 10, by = 0.5)), digits = 1)</code></p></li>
<li><p><code>summary(anova(lm(mpg ~ wt, data = mtcars)))</code></p></li>
<li><p><code>summary(lm(dist ~ log(accel), data = na.omit(attenu)))</code></p></li>
</ul></li>
<li><p>Sem salvar objetos intermediários, utilize operadore(s) pipe(s) para reescrever o código abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r">   dados &lt;-<span class="st"> </span><span class="kw">subset</span>(iris, Sepal.Length <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(Sepal.Length))
   <span class="kw">cor</span>(dados<span class="op">$</span>Sepal.Length, dados<span class="op">$</span>Sepal.Width)</code></pre></li>
<li><p>Sem salvar objetos intermediários, utilize operadore(s) pipe(s) para reescrever o código abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r">   vetor &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
   <span class="kw">plot</span>(<span class="kw">matrix</span>(<span class="dt">data =</span> vetor, <span class="dt">ncol =</span> <span class="dv">5</span>, <span class="dt">nrow =</span> <span class="dv">5</span>))
   quantil &lt;-<span class="st"> </span><span class="kw">quantile</span>(vetor)
   <span class="kw">print</span>(quantil)</code></pre></li>
<li><p>Sem fazer uso dos operadores de atribuições <code>&lt;-</code> ou <code>=</code>, reescreva o código abaixo usando operadore(s) pipe(s):</p>
<pre class="sourceCode r"><code class="sourceCode r">   mtcars &lt;-<span class="st"> </span><span class="kw">transform</span>(mtcars, <span class="dt">cyl =</span> cyl <span class="op">*</span><span class="st"> </span><span class="dv">2</span>)</code></pre></li>
<li><p>Considere o código abaixo que faz uso do operador <code>%&gt;%</code>. <strong>Dica</strong>: busque nas documentações do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a>, o uso das funções <code>subtract</code> e <code>divide_by</code>. O que esse código faz? Reescreva-o sem fazer uso do operador <code>%&gt;%</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">    vetor &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.7</span>, <span class="fl">2.74</span>, <span class="fl">5.66</span>, <span class="fl">8.13</span>, <span class="fl">4.04</span>)
    vetor <span class="op">%&lt;&gt;%</span><span class="st"> </span><span class="kw">subtract</span>(., <span class="kw">mean</span>(.)) 
    vetor <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">divide_by</span>(., <span class="kw">sd</span>(.))</code></pre></li>
<li><p>Considere o código abaixo e reescreva-o utilizando o operador <code>%&gt;%</code> sem utilizar de passos intermediários. <strong>Dica</strong>: Procure identificar o uso da função <code>extract</code> do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">   <span class="co"># Essa função não deverá entrar no pipe.</span>
   <span class="kw">set.seed</span>(<span class="dv">0</span>) 

   x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">100</span>)
   x &lt;-<span class="st"> </span>x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>]
   <span class="kw">round</span>(<span class="kw">mean</span>(x), <span class="dt">digits =</span> <span class="dv">1</span>)</code></pre></li>
<li><p>Reescreva o código abaixo utilizando o operador pipe <code>%&gt;%</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">   dados &lt;-<span class="st"> </span><span class="kw">subset</span>(iris, Sepal.Length <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) 
   <span class="kw">aggregate</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Species, dados, <span class="dt">FUN =</span> mean)</code></pre>
<p>Tente reescrever o código apenas utilizando o operador <code>%&gt;%</code>e depois modifique-o para utilizar o operador de exposição <code>%$%</code>. <strong>Dica</strong>: procure entender o emprego das funções <code>subset</code> e <code>aggregate</code>, funções dos pacotes <strong>base</strong> e <strong>stats</strong>, respectivamente.</p></li>
<li><p>Estude a vinheta do pacote <a href="https://github.com/tidyverse/magrittr"><strong>magrittr</strong></a>. Acesse a vinheta <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html"><strong>aqui</strong></a>.</p></li>
<li><p>Explique o que o código abaixo faz:</p>
<pre class="sourceCode r"><code class="sourceCode r">   f &lt;-<span class="st"> </span>. <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">subtract</span>(., <span class="kw">mean</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">divide_by</span>(., <span class="kw">sd</span>(.))</code></pre></li>
<li><p>Use o que aprendeu ao resolver o exercício anterior para reescrever o código abaixo usando pipes:</p>
<pre class="sourceCode r"><code class="sourceCode r">  vetor &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.7</span>, <span class="fl">2.74</span>, <span class="fl">5.66</span>, <span class="fl">8.13</span>, <span class="fl">4.04</span>)
  <span class="kw">sum</span>(x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x))<span class="op">/</span><span class="kw">sd</span>(x)</code></pre></li>
</ol>
</div>
</div>
<div id="funcoes" class="section level2">
<h2><span class="header-section-number">4.2</span> Funções</h2>
<p>Como já sabemos, uma vez que você deve ter utilizado bastante o confeito de funções ao resolver os <a href="revisao-basica-da-linguagem-r.html#exercicios-propostos"><strong>exercícios sugeridos</strong></a>, funções são objetos que recebe uma ou algumas entradas, as processas em seu interior e te retorna uma ou mais saída(s). O diagrama <a href="relatorio-markdown-em-r.html#fig:diagramafuncao">4.5</a> mostra um comportamento genérico de uma função qualquer (<strong>function</strong>) que recebe uma quantidade arbitrária de argumentos, com estruturas de dados distintas, e retorna também uma quantidade arbitrária de informações, objetos com estruturas de dados distintas:</p>
<div class="figure" style="text-align: center"><span id="fig:diagramafuncao"></span>
<div id="htmlwidget-192e9aee0e22115d0314" style="width:770px;height:350px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-192e9aee0e22115d0314">{"x":{"diagram":"\ngraph TD\n\nA(arg_1)\nB(arg_2)\nC(arg_3)\nD(...)\nE(arg_n)\nF(arg_n+1)\nG(...)\nH((function))\n\nA-->|vector|H\nB-->|matrix|H\nC-->|data frame|H\nD-->|...|H\nE-->|list|H\nF-->|factor|H\nG-->|new structure|H\n\nH-->|matrix|I(out_1)\nH-->|list|J(out_2)\nH-->|vector|K(out_3)\nH-->|...|L(...)\nH-->|factor|M(out_n)\nH-->|data frame|N(out_n+1)\nH-->|new structure|O(...)\n\nstyle A fill:#ffe5cc\nstyle B fill:#ffe5cc\nstyle C fill:#ffe5cc\nstyle D fill:#ffe5cc\nstyle E fill:#ffe5cc\nstyle F fill:#ffe5cc\nstyle G fill:#ffe5cc\nstyle H fill:#ff8900\nstyle I fill:#ffe5cc\nstyle J fill:#ffe5cc\nstyle K fill:#ffe5cc\nstyle L fill:#ffe5cc\nstyle M fill:#ffe5cc\nstyle N fill:#ffe5cc\nstyle O fill:#ffe5cc\n"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figura 4.5: Comportamento genérico da função de nome <strong>function</strong> que recebe diversos argumentos com estruturas de dados distintas e retorna diversos diversos objetos com estuturas de dados distintas. Note que <strong><em>new structure</em></strong>, no diagrama, deixa claro que o programador poderá criar suas novas estruturas de dados que poderão ser passadas e/ou retornadas por uma função.
</p>
</div>
<p><strong>Importante</strong>:</p>

<div class="rmdimportant">
<div class="text-justify">
<p>Algo que torma uma função bastante flexível é a capacidade de podermos passar funções como argumentos à outras funções. Muito embora esse fato não esteja destacado no diagrama acima, nunca se esqueça que, em R, você facilmente poderá passar uma função como argumento de uma outra função.</p>
<p><strong>Exemplo</strong>: <code>round(sum(c(1.73, 2.47, 7.21, 8.74, NA), na.rm = TRUE), digits = 1)</code></p>
</div>
</div>

<p>Uma função em R é dividida em três partes:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Lista de Argumentos</strong>: Conjunto de argumentos, podendo ter as mais variadas estruras de dados que pode inclusive alterar o comportamento da função.</p></li>
<li><p><strong>Corpo</strong>: Código no interior da função que será capas de processar e tomar decisões de acordo com sua lista de argumentos.</p></li>
<li><p><strong>Ambiente</strong>: Os ambientes (<strong><em>environment</em></strong>) de reconhecimentos de objetos no interior da função. Isso permite que possamos ter objetos com o mesmo nome referindo-se à conteúdos distintos na memória do computador.</p></li>
</ol>
<p>Como já sabemos, mas irei repetir, a forma geral de implementação de uma função é:</p>
<pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="cf">function</span>(argumentos){
   <span class="co"># Aqui é onde as coisas acontecem.</span>
   corpo
} <span class="co"># Fim da função.</span></code></pre>
<p>Poderemos identificar essas três partes de uma função utilizando as funções <code>formals()</code>, <code>body()</code> e <code>environment()</code>. Por exemplo, considere a função abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){
   <span class="st">`</span><span class="dt">+</span><span class="st">`</span>(x,y)
}

<span class="co"># Lista de argumentos.</span>
<span class="kw">formals</span>(f)</code></pre>
<pre><code>## $x
## 
## 
## $y</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Corpo da função.</span>
<span class="kw">body</span>(f)</code></pre>
<pre><code>## {
##     x + y
## }</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ambiente que a função foi definida.</span>
<span class="kw">environment</span>(f)</code></pre>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>Além disso, lembre-se que funções podem ter argumentos com valores já pré-definidos, como é o caso de <code>f()</code> no código que segue:</p>
<pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">2</span>){
   x <span class="op">+</span><span class="st"> </span>y
}
<span class="kw">f</span>(<span class="dv">5</span>)</code></pre>
<pre><code>## [1] 7</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">f</span>(<span class="dv">2</span>,<span class="dv">4</span>)</code></pre>
<pre><code>## [1] 6</code></pre>
<div id="passando-atributos" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Passando atributos</h3>
<p>Uma função em R é um objeto qualquer. Dessa forma, assim como qualquer objeto, uma função poderá carregar consigo uma quantidade qualquer de atributos que podem ser recuperados e utilizados a qualquer momento. Considere os códigos que seguem:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Vetor com valores inteiros em memória de 1 à 10.</span>
x &lt;-<span class="st"> </span>1L<span class="op">:</span>10L

<span class="co"># Introduzindo dois argumentos ao objeto x.</span>
<span class="co"># Primeiro argumento: desc, que apresenta uma pequena descrição do objeto x.</span>
<span class="co"># Segundo argumento: M, uma matriz qualquer que poderia vir a ser útil guardar.</span>
<span class="kw">attr</span>(<span class="dt">x =</span> x, <span class="dt">which =</span> <span class="st">&quot;desc&quot;</span>) &lt;-<span class="st"> &quot;vetor com valores inteiros&quot;</span>
<span class="kw">attr</span>(<span class="dt">x =</span> x, <span class="dt">which =</span> <span class="st">&quot;M&quot;</span>) &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">8</span>), <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)</code></pre>
<p>Note que agora o objeto <code>x</code> carrega não apenas os valores inteiros de 1 a 10. Foram acrescentados dois argumentos à <code>x</code>, são eles, <code>desc</code> que contém uma string descrevendo o que é o objeto <code>x</code>. Perceba que os atributos não afetam as operações que realizamos com <code>x</code>, mas poderemos, se desejarmos, acessar os atributos e trabalharmos com eles, como postra o trecho de código abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Os atributos não irão afetar as operações realizadas </span>
<span class="co"># considerando o objeto x.</span>
<span class="kw">sum</span>(x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</code></pre>
<pre><code>## [1] 65</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Listando os atributos do objeto x:</span>
<span class="kw">attributes</span>(x)</code></pre>
<pre><code>## $desc
## [1] &quot;vetor com valores inteiros&quot;
## 
## $M
##      [,1] [,2]
## [1,]    1    3
## [2,]    7    8</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Acessando o atributo de nome M (uma matriz) </span>
<span class="co"># e invertendo.</span>
<span class="kw">solve</span>(<span class="kw">attr</span>(x, <span class="st">&quot;M&quot;</span>))</code></pre>
<pre><code>##            [,1]        [,2]
## [1,] -0.6153846  0.23076923
## [2,]  0.5384615 -0.07692308</code></pre>
<p>Como é possível introduzir atributos à qualquer objeto em R, e funções são objetos, então considerre o trecho de código que segue, em que é introduzido o atributo <code>M</code> do objeto <code>x</code> como atributo da função <code>f()</code> abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retorna os caracteres &quot;-&quot;, &quot;0&quot;, &quot;+&quot;</span>
<span class="co"># a depender do valor informado.</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(x){
   <span class="co"># x é um objeto numérico.</span>
   
   <span class="cf">if</span> (x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="st">&quot;0&quot;</span>
   <span class="cf">else</span> <span class="kw">ifelse</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;+&quot;</span>, <span class="st">&quot;-&quot;</span>)
}

<span class="co"># Introduzindo o atributo de nome desc que contém uma breve descrição da</span>
<span class="co"># função f():</span>
<span class="kw">attr</span>(f, <span class="st">&quot;desc&quot;</span>) &lt;-<span class="st"> &quot;retorna -, 0 ou +, a depender do valor passado à x&quot;</span>

<span class="co"># Acessando o conteúdo do atributo desc:</span>
<span class="kw">attr</span>(f, <span class="st">&quot;desc&quot;</span>)</code></pre>
<pre><code>## [1] &quot;retorna -, 0 ou +, a depender do valor passado à x&quot;</code></pre>
<p>Sabemos que o uso da função <code>body()</code> permete-nos acessar o corpo de uma função (código da função). Porém, você apenas irá visualizar as partes do código que foram implementadas estritamente em R. Por exemplo, no trecho de código abaixo é apresentado o sudo da função <code>body()</code> sobre uma função implementada em R e outra função que tem o seu código implementado em uma linguagem de mais baixo nível:</p>
<pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Acessando o corpo da fução rm():</span>
    <span class="kw">body</span>(ls)
    
    <span class="co"># Tentando acessar o corpo da função sum():</span>
    <span class="kw">body</span>(sum)</code></pre>
<p>Note que foi possível acessar parte do conteúdo, implementado em R, da função <code>rm()</code>. Porém, no caso da função <code>sum()</code> o retorno foi <code>NULL</code>, uma vez que essa função é por completo implementada em uma linguagem de mais baixo nível. Isso se deve ao fato de que essas funções foram escritas em linguagens compiladas como o caso de C/C++, camhando assim um código objeto e não um código fonte.</p>
<p>Em muitas situações desejamos passar uma função como argumento à outra função. O trecho de código abaixo cria duas simples funções, <code>f()</code> e <code>g()</code>, em que passamos <code>f()</code> como argumento à função <code>g()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># As funções não necessariamente necessitam ter argumentos.</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(){
   <span class="st">&quot;Olá&quot;</span>
}

g &lt;-<span class="st"> </span><span class="cf">function</span>(func){
   <span class="kw">paste</span>(func, <span class="st">&quot;mundo&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)
}

<span class="co"># Passando a função f() como argumento da função g():</span>
<span class="kw">g</span>(<span class="dt">func =</span> <span class="kw">f</span>())</code></pre>
<pre><code>## [1] &quot;Olá mundo&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Compondo as funçoes nchar(), g() e f().</span>
<span class="co"># A função nchar() retorna a quantidade de caracteres </span>
<span class="co"># na estring retornada por g().</span>
<span class="kw">nchar</span>(<span class="kw">g</span>(<span class="dt">func =</span> <span class="kw">f</span>()))</code></pre>
<pre><code>## [1] 9</code></pre>
</div>
<div id="funcoes-anonimas" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Funções anônimas</h3>
<p>Algo que é bastante útil quando estamos trabalhando com funções é a possibilidade de não nomear uma função. Essa estratégia é interessante quando temos funções curtas que não queremos nos dar o trabalho de pensarmos em um nome. Normalmente, aplica-se à casos de funções curtas que são passadas como argumento à outras funções. O trecho de código que segue apresenta o uso de uma função anônima passada como argumento à função <code>integrate()</code> de R:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Passando a função anônima function(x) x ^ 2 como argumento da </span>
<span class="co"># função integrate().</span>
<span class="kw">integrate</span>(<span class="cf">function</span>(x) x <span class="op">^</span><span class="st"> </span><span class="dv">2</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">2</span>)<span class="op">$</span>value</code></pre>
<pre><code>## [1] 2.666667</code></pre>
<p>Não esqueça que, em muitos casos, compor funções utilizando o operador <code>%&gt;%</code> pode ser interessante. As composições acimas poderiam ser realizadas da forma que segue:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Primeira composição utilizando o operador %&gt;%: </span>
f <span class="op">%&gt;%</span><span class="st"> </span>g <span class="op">%&gt;%</span><span class="st"> </span>nchar

<span class="co"># Segunda composição utulizando os operadores pipes %&gt;%  e %$%:</span>
(<span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">integrate</span>(<span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">2</span>) <span class="op">%$%</span><span class="st"> </span>value</code></pre>
<p><strong>Nota</strong>:</p>

<div class="rmdnote">
<div class="text-justify">
<p>Utilizar os operadores pipes pode ser interessante quando estamos a fazer uma análise de dados, em que queremos deixar claro uma sequência lógica de operações. Porém, note que pipes não irão tornar o seu código mais eficientes do ponto de vista computacional, nem o contrário, ou seja, utilizar pipes não irão tornar os seus códigos menos eficientes.</p>
</div>
</div>

</div>
<div id="escopo-lexico" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Escopo léxico</h3>
<p>Em computação, o escopo é o que delimita a relação de objetos e expressões, ou seja, em que partes do código um ou mais objetos são reconhecidos por uma dada expressão ou conjunto de expressões. Na maioria das linguagens de programção o escopo é léxico, também chamado de escopo estático, uma vez que podem ser delimitados estaticamente, antes da execução do programa por meio da sintaxe da linguagem, ou seja, por meio da estrutura léxica da linguagem.</p>
<p>A linguagem R tem escopo léxico, assim como diversas outras linguagens de programação. Trata-se de tipo de escopo comum em linguagens como Pascal, C, C++, Ada, Go, Haskell, R, Julia, Python, Ruby, entre diversas outras. Considere o exemplo apresentado no código abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;fora&quot;</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(){
   x &lt;-<span class="st"> &quot;dentro&quot;</span>
   x
}; <span class="kw">f</span>()</code></pre>
<pre><code>## [1] &quot;dentro&quot;</code></pre>
<p>Para quem já programa um pouco em R, o retorno da função <code>f()</code> era esperado, uma vez que olhando para o código, entendemos facilmente qual a saída, uma vez que a sintaxe nos acusa (escopo léxico). Na verdade, o termo vem de <strong><em>lexing</em></strong>, que refere-se ao processo de conversão de partes significativas do código intendíveis para o interpretador.</p>
<p>Existem linguagens que fazem uso de <a href="https://pt.wikipedia.org/wiki/Escopo_(computa%C3%A7%C3%A3o)#Escopo_din%C3%A2mico"><strong>escopo dinâmico</strong></a>, como é o caso do Emacs Lisp, shell Bash, LaTeX (linguagem de marcação), entre outras. Como esse não é o caso da linguagem R que frequentemente nos deparamos em R, aqui não é o lugar para dissertar em relação à esse assunto.</p>
<p>No código acima, perceba que havia um objeto <code>x</code> definido no interior da função. Dessa forma, o retorno da função buscará por referências à <code>x</code> no mesmo escopo da função, isto é, irá considerar <code>x</code> definido por <code>x &lt;- "dentro"</code>. Porém, considere a simples modificação do código na forma que segue:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;fora&quot;</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(){
   x
}; <span class="kw">f</span>()</code></pre>
<pre><code>## [1] &quot;fora&quot;</code></pre>
<p>No código acima, a função <code>f()</code> não pode encontrar referências ao objeto <code>x</code> no interior da função. Dessa forma, R considerar-a o objeto <code>x</code> no respectivo escopo mais externo, que nesse caso é o objeto <code>x</code> definido por <code>x &lt;- "fora"</code>. Esse comportamento é válido se consideramos estruturas mais aninhadas, como a que é apresentada no código que segue:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;estou fora de f&quot;</span>
f &lt;-<span class="st"> </span><span class="cf">function</span>(){

   <span class="co"># Podemos definir funções dentro de funções.</span>
   g &lt;-<span class="st"> </span><span class="cf">function</span>(){
      x
   } <span class="co"># fim da função interna</span>
   <span class="kw">list</span>(<span class="dt">g =</span> <span class="kw">g</span>(), <span class="dt">x =</span> x)
} <span class="co"># fim da função externa</span>

<span class="kw">f</span>()</code></pre>
<pre><code>## $g
## [1] &quot;estou fora de f&quot;
## 
## $x
## [1] &quot;estou fora de f&quot;</code></pre>
<p>Perceba que tanto o retorno da função <code>g()</code> quando o objeto <code>x</code> da função <code>f()</code> referem-se ao valor de <code>x</code> definido fora do escopo da função <code>f()</code>. Isso se deve ao fato da linguagem R procurar um objeto de nome <code>x</code> de froma sucessivas, partindo do escopo ao qual o objeto é invocado à escopos em níveis mais externos. No código acima, tanto <code>g()</code> definida dentro de <code>f()</code> quanto a prórpia função <code>f()</code> apenas encontrará referência à <code>x</code> no ambiente mais externo, isto é, será considerado o objeto <code>x</code> definido por <code>x &lt;- "estou fora de f"</code>.</p>
<!-- Algo interessante de se observar é que muito embora o R procure em escopos mais externos a primeira referência ao objeto que invocamos em um escopo mais interno, escopo este em que não há nenhuma referência à este objeto, em futuras invocações da função, a partir da segunda chamada, o objeto `x` já encontra-se definido no interior da função `f()`. -->
<!-- ```{r} -->
<!-- x <- 0 -->
<!-- f <- function(){ -->
<!--    # x encontra-se definido no escopo externo na primeira chamada à -->
<!--    # função f. -->
<!--    x <- x + 1  -->
<!--    x -->
<!-- } -->
<!-- f() -->
<!-- f() -->
<!-- ``` -->
<!-- Observe que mesmo que você chame por diversas vezes consecutivas a função `f()` o retorno sempre será `1`. Para ser possível obter somas em 1 iterativas, uma solução para esse problema seria fazer uso do operador de atribuição profunda, denotado por `<<-`. Esse operador permite que as alterações no objeto `x` ocorra no primeiro escopo mais abrangente que faz referência à um objeto `x`. Considere o trecho de código que segue: -->
<!-- ```{r} -->
<!-- x <- 0 -->
<!-- f <- function(){ -->
<!--    # x encontra-se definido no escopo externo na primeira chamada à -->
<!--    # função f. -->
<!--    x <<- x + 1 # Operador de atribuição profunda. -->
<!--    x -->
<!-- } -->
<!-- f() -->
<!-- f() -->
<!-- ``` -->
<!-- Porém, perceba o resultado que segue: -->
<!-- ```{r} -->
<!-- x <- 0 -->
<!-- f <- function(){ -->
<!--    x = 7 -->
<!--    x <<- x + 1 # Operador de atribuição profunda. -->
<!--    x -->
<!-- } -->
<!-- f() -->
<!-- x -->
<!-- ``` -->
<!-- Note no código acima que o valor retornado pela função é `7` (sempre) e não `8`, como alguns poderiam esperar. Perceba que isso se deve ao fato de que no interior de `f()`, sempre teremos que `x` ao lado direito do operador `<<-` será `7`, uma vez que em todas as chamadas, há dentro da função `f()` a definição de `x = 7`. Isso também implicará que o valor de `x` do lado esquerdo do operador `<<-` sempre será atualizado para `8`, em todas as chamadas. Veja que `x` ao lado esquerdo de `<<-` refere-se ao objeto `x` no escopo mais extero ao escopo de `x` no interior da função. -->
<!-- **Observação**: -->
<!-- ```{block2, type='rmdobservation'} -->
<!-- <div class=text-justify> -->
<!-- Em R, os operadores `<-` e `<<-` também informam o sentido da atribuição, que normalmente é da direita para a esquerda, assim como ocorre ao considerar o operador `=`. Quase sempre as atribuições são da esquerda para a direita, com exceção das situações em que invertemos os sentidos dos operadores `<-` e `<<-`, isto é, quando consideramos as variantes `-> ` e `->>`, respectivamente. -->
<!-- </div> -->
<!-- ``` -->
<!-- **Exemplo**:  -->
<!-- ```{r} -->
<!-- f <- function(){ -->
<!--    2 -> x -->
<!--    x * 2 ->> x -->
<!--    x -->
<!-- } -->
<!-- f(); x -->
<!-- ``` -->
<!-- ### Avaliação preguiçosa -->
<!-- Tecnicamente, os argumentos de uma função são promessas [***promises***](https://cran.r-project.org/doc/manuals/R-lang.html#Promise-objects) e fazem parte do mecanismo de (***lazy evaluation***). Quando uma função é chamada, cada um de seus argumentos formais são vinculados à uma promessa. Dessa forma, cada promessa, para cada um dos argumentos, armazenam a expressão do argumento e um ponteiro para o ambiente ao qual a função foi chamada. Tais promessas não armazenam nenhum valor, até o momento em que o argumento seja necessário para a função. Sendo assim, (***promises***) trata-se de uma estrutura de dados. ***Promisses*** possuem: -->
<!--    * Um **ambiente**: ambiente em que uma função é avaliada/invocada.  -->
<!--    * Uma **expressão**: uma expressão válida passada para um argumento de uma função; -->
<!--    * Um **valor**: resultado da avaliação de uma expressão em um ambiente específico. -->
<!-- Em R, os argumentos de uma função são avaliados de forma preguiçosa (***lazy evaluation***), são apenas promessas, ou seja, só serão avaliados na necessidade de uso do parâmetro. Em outras palavras, um parâmetro poderá eventualmente nunca ser avaliado quando uma função é executada. Considere o código que segue: -->
<!-- ```{r} -->
<!-- # A função f() tem o argumento x que -->
<!-- # não é utilizado. -->
<!-- f <- function(x){ -->
<!--    y <- 1 -->
<!--    y -->
<!-- } -->
<!-- f() -->
<!-- ``` -->
<!-- Como é possível observar, a função `f()` possui `x` como argumento, argumento este que em nenhum momento é utilizado. Dessa forma, mesmo que `x` não esteja definido, não teremos como retorno um erro ao executar `f()`. Isso se deve ao fato de que argumentos de funções, em R, são avaliados de forma preguiçosa.  -->
<!-- Um dos grandes benefícios da avaliação preguiçosa é a possibilidade que temos de atrasar a computação, de modo que um dos argumentos poderá conter cálculos intensivos que só será avaliado se necessário. Dessa forma, devido a possibilidade de uma função matemática poder ser passado como argumento à uma funçãom, que ventualmente pode ser algo custoso do ponto de vista computacional, [***lazy evaluation***](https://en.wikipedia.org/wiki/Lazy_evaluation) é o padrão da linguagem.  -->
<!-- **Importante**: -->
<!-- ```{block2, type='rmdimportant'} -->
<!-- <div class=text-justify> -->
<!-- Como estamos a falar de argumeto de funções, destaco algo importante da linguagem R. Ao se utilizar o operador `<-` para realizar uma atribuição em uma chamada de função, a variável é ligada fora da função, ou seja, no ambiente em que a função é chamada, como mostra o exemplo que segue: -->
<!--    **Exemplo**:  -->
<!-- ```{r} -->
<!-- y <- 0 -->
<!-- f <- function(x){ -->
<!--    y <- 2 -->
<!--    x + 1 -->
<!-- } -->
<!-- f(y <- 7) -->
<!-- y -->
<!-- ``` -->
<!-- Perceba que fazer `f(y = 7)` retornará um erro, uma vez que R entende que estamos passando o valor `7` à um argumento `y` que não existe em `f()`. Note que `f(y <- 7)` é equivalente a escrever `f(x = y <- 7)` ou `f(x = (y = 7))`. Porém, ao utilizarmos o operador `<-`, além de passarmos os argumentos à `f()` estamos também criando os objetos à esquerda do operador fora da função. -->
<!-- </div> -->
<!-- ### varargs: ... (dot-dot-dot) -->
<!-- Algo bastante útil e que torna flexível uma linguagem de programação é a possibilidade de escrever funções com quantidade variádicas de argumentos, isto é, funções [**varargs**](https://en.wikipedia.org/wiki/Variadic_function). Em R isso é possível especificando o argumento especial `...` (***dot-dot-dot***), ou **ponto-ponto-ponto**, em português. -->
<!-- Um uso comum do operador `...` é a possibilidade de passarmos argumentos adicionais para uma função que utilizamos em nossa implementação. Por exmeplo, considere o código abaixo: -->
<!-- ```{r, fig.align='center', fig.dim=c(4,4)} -->
<!-- # Fixando uma semente para gerarmos sempre a mesma amostra. -->
<!-- set.seed(0)  -->
<!-- # Gerando um conjunto de dados com distribuição normal padrão. -->
<!-- data <- rnorm(n = 100, mean = 0, sd = 1) -->
<!-- myhist <- function(x = data, ...){ -->
<!--   # Perceba o uso de ... em hist():    -->
<!--   result <- hist(x, ...) -->
<!--   list(n = length(result$counts), counts = result$counts) -->
<!-- } -->
<!-- # A função myhist() não possuia a definição dos argumentos col, -->
<!-- # main, ylab e border. -->
<!-- myhist(x = data, col = rgb(1, 0.9, 0.8), main = "",  -->
<!--        ylab = "Frequências", border = NA) -->
<!-- ``` -->
<!-- A função `myhist()`, implementada acima, constroi um histograma com base em um vetor de dados passado como argumento à `x`, retornando uma lista com o número de classes e a quantidade de observações da amostra, em cada uma das classes. Note que `myhist()` possui apenas dois argumentos, `x` e `...`, respectivamente. O argumento especial `...` permite que `myhist()` herde todos argumentos da função `hist()`. Asim, muito embora a função `myhist()` não possui os argumentos `col`, `main`, `ylab`e `border` definidos formalmente, poderemos ascessar esses e os demais argumentos de `hist()` mesmo sem defini-los. -->
<!-- Nas situações em que desejarmos acessar os elementos passados à `...` por suas posições, poderemos fazer uso da notação especial `..1`, `..2`, etc. Considere o trecho de código que segue: -->
<!-- ```{r} -->
<!-- f <- function(...){ -->
<!--    n <- ...length() -->
<!--    if (n != 3)  -->
<!--       stop("A função deve ter exatamente 3 argumentos.") -->
<!--    else -->
<!--       for(i in 1:...length()){ -->
<!--          cat("O elemento ", i, " de \"...\" é: ", ...elt(i), "\n") -->
<!--       } -->
<!--    return(..1 * ..2 + ..3) -->
<!-- } -->
<!-- f(2, 3, 1) -->
<!-- ``` -->
<!-- Note que a função `f()` retorna o produto do primeiro com o segundo argumento e soma com o terceiro. Além disso, foram utilizadas as funções `...length()` que retorna o tamanho de `...` e `...elt(i)` que equivale à `..i`. A função `...elt(i)` nada mais é do que fazer `eval(paste0("..", n))`. -->
<!-- Como dito, uma das grandes vantagens do uso de `...` é a possibilidade de passarmos argumento de outras funções que estão sendo utilizadas pela função que estamos a implementar. O uso de funções **varargs** destacam-se também em situações em que fazemos uso de programação orientada à objeto por função genérica, sistema de orientação à objeto conhecido, em R, como sistema S3 de orientação à objeto e que estudaremos mais a frente. Considerando o sistema S3 de orientação à objeto, note que funções como `summary()` e `print()` podem ser utilizadas em diversas situações e que muito provavelmente terão argumentos distintos em cada uma dessas circunstâncias. A capacidade de uma função ter várias formas e se adequar a cada uma delas está fortemente relacionada com a definição de funções [**polimórficas**](https://en.wikipedia.org/wiki/Polymorphism_(computer_science)), uma das principais características do paradigma de programação orientada à objeto e que está intimamente relacionadas com funções **varargs**, principalmente no sistema S3. -->
<!-- Perceba que diversas funções R são **varargs**, por exemplos, a função `sum()`. Note, no trecho de código abaixo, que a característica de ***lazy evaluation*** quando associada à uma função com um número arbitrário de argumentos poderá retornar algo equivocado e nenhum erro é dado para nos alertarmos de um possível problema: -->
<!-- ```{r} -->
<!--    sum(1:5, NA, narm = TRUE) -->
<!-- ``` -->
<!-- Para o código acima, gostaríamos que o equívoco a respeito do nome correto do argumento (`na.rm`) não tivesse ocorrido. Aqui, nosso interesse seria fazer: -->
<!-- ```{r} -->
<!--    sum(1:5, NA, na.rm = TRUE) -->
<!-- ``` -->
<!-- **Nota**: -->
<!-- ```{block2, type='rmdnote'} -->
<!-- <div class=text-justify> -->
<!-- Um outro inconveniente de construir funções **varargs** além dos equívocos desarpesebidos quando erramos algum de seus arugmentos é que essas funções normalmente são um pouco mais complicadas de serem documentadas, visto que devemos ter um grande cuidado ao deixar claro como os argumentos serão substituídos e utilizados. -->
<!-- Esses problemas não são suficientes justificar um desaconselho do uso de funções **varargs**. Na verdade é muito importante a construção de funções **varargs** e você deve utilizar, sempre que puder e na medida da necessidade, uma vez que isto tornará suas funções bastante flexíveis. -->
<!-- </div> -->
<!-- ``` -->
<!-- ### Funções infixas -->
<!-- Para começarmos a falar de funções infixas (***infix***), os slogans abaixo, traduzidos para o português, poderão ser úteis para um melhor entendimento: -->
<!-- > "Para entender a computação em R, dois slogans são úteis: -->
<!-- > * Tudo o que existe é um objeto. -->
<!-- > * Tudo o que acontece é uma chamada de função." -->
<!-- > --- [**John M. Chambers**](https://en.wikipedia.org/wiki/John_Chambers_(statistician)), no artigo intitulado [***Object-Oriented Programming, Functional Programming and R***](https://projecteuclid.org/download/pdfview_1/euclid.ss/1408368569), *Statistical Science*, Vol. 29, 2014, p. 170. -->
<!-- Nas situações de funções que possuem dois argumentos, construir um operador infixo pode ser de grande utilidade. O exemplo abaixo mostra duas formas de somarmos dois termos utilizando a função \`+\` e o operador infixo `+`, respectivamente. Perceba que a segunda forma é mais conveniente que a primeira: -->
<!-- ```{r} -->
<!-- x <- y <- 1 -->
<!-- # Forma 1 (prefix): -->
<!-- `+`(x, y) -->
<!-- # Forma 2 (infix): -->
<!-- x + y -->
<!-- ``` -->
<!-- Além dos operadores matemáticos `+`, `-`, `*` e `/` serem funções infixas, podendo também chamar de operadores infixos ou ***infix***, diversas outras funções são infixas, como por exemplo, `^`, `::`, `&`, `|`, `&&`, `||`, `<=`, `>=`, `<`, `>`, `==`, `!=`, `$`, `%%`, `%*%`, `%in%`, `<-`, `<<-`, entre diversas outras funções. O exemplo abaixo apreseta o uso de algumas dessas funções na forma prefixa: -->
<!-- ```{r} -->
<!-- `<=`(1,3) -->
<!-- `^`(2,3) -->
<!-- x <- list(a = 1, b = 2) -->
<!-- `$`(x, a) -->
<!-- ``` -->
<!-- Assim como existem diversas funções infixas em R previamente implementadas, também poderemos construir nossas funções infixas. Para tanto, basta considerarmos a notação `%nome%`, em que `nome` deverá ser substituído por um nome válido de função. Considere o código abaixo: -->
<!-- ```{r} -->
<!-- `%+%` <- function(x, n){ -->
<!--    rep(x, times = n) -->
<!-- } -->
<!-- # Forma prefixa: -->
<!-- `%+%`("infix", 4) -->
<!-- # Forma infixa: -->
<!-- "infix" %+% 4 -->
<!-- ``` -->
<!-- ### Função de substituição -->
<!-- Você muito provavelmente já deve ter feito uso de funções de substituição, como por exemplo, `names()`, `colnames()`, `rownames()`, entre outras funções. Essas são chamadas de funções de substituição devido ao comportamento que é expresso no código que segue: -->
<!-- ```{r} -->
<!-- vetor <- c(1,2,3) -->
<!-- names(vetor) <- c("a", "b", "c") -->
<!-- x -->
<!-- ``` -->
<!-- A função `names()`, para produzir o mesmo resultado do código acima, poderia ser invocada na foma que segue: -->
<!-- ```{r} -->
<!-- vetor <- c(1,2,3)  -->
<!-- `names<-`(x = vetor, value = c("a", "b", "c")) -->
<!-- ``` -->
<!-- Pelo código acima podemos perceber que as funções de substituição nada mais são que funções de dois argumentos, a saber `x` e `value`, respectivamente. Dessa forma, os valores passados à `value` modificam o objeto `x` que nesse caso são os nomes do objeto `vetor`. -->
<!-- **Exemplo**: Implementação da função de substituição `samenames()` que atribui o mesmo nome à todos elementos do vetor `x`. -->
<!-- ```{r} -->
<!-- `samenames<-` <- function(x, value){ -->
<!--    if (length(value) != 1) stop("Um vetor de comprimento 1 deverá ser atribuído.") -->
<!--    else{ -->
<!--       names(x) <- rep(value, times = length(x)) -->
<!--    } -->
<!--    x -->
<!-- } -->
<!-- x <- 1L:10L -->
<!-- samenames(x) <- "a" -->
<!-- x -->
<!-- ``` -->
<!-- Em situações em que a função de substituição necessita de mais argumentos além dos argumentos obrigatórios `x` e `value`, deveremos colocá-los entre os argumentos `x` e `value`. No exemplo do código abaixo introduzimos o argumento `rm.id` em que, se desejarmos, poderemos omitir algumas posições do vetor `x`: -->
<!-- ```{r} -->
<!-- `samenames<-` <- function(x, rm.id = NULL, value){ -->
<!--   if (length(value) != 1) stop("Um vetor de comprimento 1 deverá ser atribuído.") -->
<!--   else if (!is.null(rm.id) && is.numeric(rm.id)){ -->
<!--     x <- x[-rm.id] -->
<!--     names(x) <- rep(value, times = length(x)) -->
<!--   }else{ -->
<!--     names(x) <- rep(value, times = length(x)) -->
<!--   } -->
<!--   x -->
<!-- } -->
<!-- x <- 1L:10L -->
<!-- samenames(x) <- "a" -->
<!-- # Removendo a primeira e a décima posição de x. -->
<!-- samenames(x, c(1,10)) <- "a" -->
<!-- x -->
<!-- ``` -->
<!-- **Observação**: -->
<!-- ```{block2, type='rmdobservation'} -->
<!-- <div class=text-justify> -->
<!-- A linguagem R possui diversos outros recursos, escritos em forma especial, que também são funções. Abaixo pontuarei alguns desses recursos, para que você tenha uma ideia, porém, existem mais: -->
<!--    * `(x)` com representação prefixa dada por `` `(`(x) ``; -->
<!--    * `x[i]` com representação prefixa dada por `` `[`(x, i) ``; -->
<!--    * `x[[i]]` com representação prefixa dada por `` `[[`(x, i) ``; -->
<!--    * `{x}` com representação prefixa dada por  `` `{`(x) ``; -->
<!--    * `if(condicao)` com representação prefixa dada por `` `if`(condicao, se_verdade, se_falso) ``; -->
<!--    * `for(variável in conjunto) ação` com representação prefixa dada por `` `for`(variável, conjunto, ação) ``; -->
<!--    * `while(condição) ação`  com representação prefixa dada por `` `while`(cond, action) ``. -->
<!-- </div> -->
<!-- ``` -->
<!-- ### Closures -->
<!-- Como já sabemos, um uso comum de funções anônimas é criar pequenas funções em que não vale a pena nomear. Normalmente são funções pequenas que são passadas como argumento à outras funções, fornecendo assim menos ruídos visuais no código e nos livrando da necessidade de pensarmos em um bom nome para a função.  -->
<!-- Um outro uso comum e importantes para funções anônimas é quando desejamos criar [**closures**](https://en.wikipedia.org/wiki/Closure_(computer_programming)). -->
<!-- ### Exercícios {-}  -->
<!-- 1. Quais são os três componentes de uma função? -->
<!-- 2. Contrua o objeto `y` que retorne a saída abaixo: -->
<!--     ```{r, echo = FALSE} -->
<!--       y <- 1:10 -->
<!--       attr(y, "att_1") <- "Isso é um atributo" -->
<!--       y -->
<!--     ``` -->
<!-- 3. Remova o atributo `att_1` do objeto `y` acima.  -->
<!-- 4. O que o código abaixo retorna? Explique. **Dica**: para certificar-se que esteja entendendo, tente prever sem executar a função. -->
<!--     ```{r, eval = FALSE} -->
<!--     f <- function(x){ -->
<!--        f <- function(x){ -->
<!--           f <- function(x){ -->
<!--              x * 3 -->
<!--           } -->
<!--           f(x) * 2 -->
<!--        } -->
<!--        f(x) + 1 -->
<!--     } -->
<!--     f(7) -->
<!--     ``` -->
<!-- 5. O que o código abaixo retorna? Explique. **Dica**: para certificar-se que esteja entendendo, tente prever sem executar a função. -->
<!--     ```{r, eval = FALSE} -->
<!--        x <- 1 -->
<!--        f <- function() { -->
<!--           x <- 0 -->
<!--           x <<- x + 1 -->
<!--           x -->
<!--        } -->
<!--        f(); x -->
<!--     ``` -->
<!-- 6. O que o código abaixo retorna? **Dica**: para certificar-se que esteja entendendo, tente prever sem executar a função. -->
<!--     ```{r, eval = FALSE} -->
<!--     f <- function(){ -->
<!--        y <- 0 -->
<!--        g <- function(){ -->
<!--           y <<- y + 1 -->
<!--        } -->
<!--        list(rep(x = g(), times = y), rep(x = g(), times = y), rep(x = g(), times = y)) -->
<!--     } -->
<!--     ``` -->
<!-- 7. Implemente a função `%+%` que concatena duas strings. Permita que, por meio do uso prefixo da função, o usuário possa informar o caractere que separa as duas strings. Abaixo encontra-se um exemplo do uso infixo da função. -->
<!--     ``` -->
<!--     "Estatística" %+% "Computacional"  -->
<!--     ## [1] "Estatística Computacional" -->
<!--     ``` -->
<!-- 8. Implemente a função segundo que trabalhe da seguinte forma: -->
<!--     ``` -->
<!--        x <- 1:10 -->
<!--        segundo(x) <- 5 -->
<!--        x -->
<!--        ## [1] 1 5 3 4 5 6 7 8 9 10 -->
<!--     ``` -->
<!-- 9. Implemente a função `troca()` que trabalhe da forma abaixo: -->
<!--     ``` -->
<!--        x <- 1:10 -->
<!--        troca(x, 2) <- 7 -->
<!--        x -->
<!--        ## [1] 1 7 3 4 5 6 7 8 9 10 -->
<!--     ``` -->
<!-- 9. Qual o retorno da função abaixo? Explique. -->
<!--     ```{r, eval = FALSE} -->
<!--     f <- function(y) { -->
<!--         function(x) { -->
<!--            x + y -->
<!--         } -->
<!--     } -->
<!--     g <- f(1) -->
<!--     g(x = 2) -->
<!--     ``` -->
<!-- ## Funcionais -->
<!-- ## Sistema S3 -->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="versionamento-de-codigo.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/prdm0/aulas_computacional/edit/master/r.Rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"download": ["aulas_r.pdf"],
"toc": {
"collapse": "none"
},
"toolbar": {
"position": "fixed",
"download": "pdf",
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
